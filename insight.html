<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙÙ‚Ù‡ Ø§Ù„Ù…Ø±Ø£Ø© | Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ§Ù„Ø¬Ù…Ø§Ù„</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --p2: #eb2f96; --purp: #722ed1; --glass: rgba(255, 255, 255, 0.95);
            --bg-gradient: linear-gradient(135deg, #fdfbfd 0%, #fff0f6 100%);
            --gold: #d4af37;
        }
        body { 
            font-family: 'Tajawal', sans-serif; background: var(--bg-gradient); 
            margin: 0; padding-bottom: 90px; color: #444; min-height: 100vh;
            background-attachment: fixed;
        }
        .header { background: var(--glass); backdrop-filter: blur(10px); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 1000; border-bottom: 2px solid var(--p2); }
        .logo { font-family: 'Amiri', serif; font-size: 26px; color: var(--purp); font-weight: bold; }
        
        .container { padding: 15px; max-width: 600px; margin: auto; }
        
        /* ÙƒØ§Ø±Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ */
        .ai-entry-card {
            background: linear-gradient(45deg, var(--purp), var(--p2));
            color: white; padding: 25px 20px; border-radius: 25px; text-align: center;
            margin-bottom: 25px; cursor: pointer; box-shadow: 0 10px 20px rgba(114, 46, 209, 0.2);
            transition: 0.3s;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„ÙÙ‚Ù‡ - Ø¹Ù…ÙˆØ¯ÙŠÙ† */
        .grid-container { 
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; 
        }
        .category-card { 
            background: var(--glass); border-radius: 20px; padding: 18px 10px; text-align: center; 
            border: 1px solid rgba(114, 46, 209, 0.1); cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; align-items: center;
        }
        .category-card:hover { transform: translateY(-3px); border-color: var(--p2); background: white; }
        .category-card i { font-size: 28px; margin-bottom: 10px; color: var(--purp); }
        .category-card span { font-size: 13px; font-weight: 700; color: #555; }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ */
        .page { display: none; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .ai-interface { background: white; border-radius: 30px; padding: 20px; min-height: 500px; box-shadow: 0 15px 35px rgba(0,0,0,0.05); }
        .ai-tools-row { display: flex; justify-content: space-around; background: #fdf6ff; padding: 15px; border-radius: 20px; margin-bottom: 20px; }
        .tool-btn { border: none; background: white; color: var(--purp); width: 45px; height: 45px; border-radius: 50%; font-size: 18px; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.05); }

        #ai-chat-box { height: 300px; overflow-y: auto; border: 1px solid #f0f0f0; padding: 15px; margin-bottom: 15px; border-radius: 20px; background: #fafafa; font-family: 'Amiri'; font-size: 19px; line-height: 1.7; }
        
        textarea#ai-input { width: 100%; border-radius: 20px; border: 1.5px solid #eee; padding: 15px; height: 80px; font-family: 'Tajawal'; outline: none; box-sizing: border-box; resize: none; }

        /* Ø²Ø± Ø§Ù„ÙØªÙˆÙ‰ Ø§Ù„Ø¹Ø§Ø¦Ù… */
        .fatwa-fab { position: fixed; bottom: 100px; left: 20px; background: #009688; color: white; padding: 12px 20px; border-radius: 30px; display: flex; align-items: center; gap: 8px; text-decoration: none; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 1000; font-weight: bold; font-size: 14px; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù€ 20 Ù…Ø¯Ø®Ù„ Ø¨Ø§Ù„Ø¯Ø§Ø®Ù„ */
        .swal-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .swal-btn { background: #f9f9f9; border: 1px solid #eee; padding: 10px; border-radius: 12px; font-size: 12px; cursor: pointer; text-align: right; }
    </style>
</head>
<body>

    <header class="header"><div class="logo">ÙÙ‚Ù‡ Ø§Ù„Ù…Ø±Ø£Ø© | Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ§Ù„Ø¬Ù…Ø§Ù„</div></header>

    <div class="container">
        <div id="page-main" class="page active">
            <div class="ai-entry-card" onclick="openAI('Ø¹Ø§Ù…')">
                <i class="fas fa-mosque"></i>
                <h3>Ø§Ø³Ø£Ù„ÙŠ Ø±Ù‚Ø© ÙÙŠ Ø§Ù„ÙÙ‚Ù‡</h3>
                <p>ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù†Ù…Ùˆ Ø§Ù„Ø±ÙˆØ­ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ø´Ø±Ø¹ÙŠ</p>
            </div>
            
            <div class="grid-container" id="fiqh-grid"></div>
        </div>

        <div id="page-ai" class="page">
            <div class="ai-interface">
                <div class="ai-tools-row">
                    <button class="tool-btn" onclick="startMic()"><i class="fas fa-microphone"></i></button>
                    <button class="tool-btn" onclick="openCam()"><i class="fas fa-camera"></i></button>
                    <button class="tool-btn" onclick="uploadImg()"><i class="fas fa-image"></i></button>
                    <button class="tool-btn" onclick="showHistory()"><i class="fas fa-history"></i></button>
                </div>
                <div id="ai-chat-box"></div>
                <div class="ai-input-area">
                    <textarea id="ai-input" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø§Ù„ÙÙ‚Ù‡ÙŠ Ù‡Ù†Ø§..."></textarea>
                    <button onclick="sendToAI()" style="width:100%; margin-top:10px; background:var(--purp); color:white; border:none; padding:15px; border-radius:20px; font-weight:bold; cursor:pointer;">ØªØ­Ù„ÙŠÙ„ ÙÙ‚Ù‡ÙŠ Ù…ÙˆØ³Ø¹ âœ¨</button>
                </div>
                <button onclick="nav('main')" style="width:100%; margin-top:15px; background:none; color:#999; border:none; cursor:pointer;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚ÙˆØ§Ø¦Ù…</button>
            </div>
        </div>
    </div>

    <a href="https://www.azhar.eg/fatwacenter" target="_blank" class="fatwa-fab">
        <i class="fas fa-mosque"></i> Ø§Ø³Ø£Ù„ÙŠ Ø§Ù„Ø£Ø²Ù‡Ø±
    </a>

    <script>
        // Ø§Ù„Ù€ 15 Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙ‚Ù‡ÙŠØ© (20 Ù…Ø¯Ø®Ù„ Ù„ÙƒÙ„ Ù…Ù†Ù‡Ø§)
        const fiqhData = [
            { title: "Purity & Bloom", icon: "fa-droplet", items: ["Ø³Ù†Ù† Ø§Ù„ÙØ·Ø±Ø© âœ¨", "ØµÙØ© Ø§Ù„ØºØ³Ù„ ğŸš¿", "Ø§Ù„ÙˆØ¶ÙˆØ¡ Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠ ğŸ’§", "Ø·Ù‡Ø§Ø±Ø© Ø§Ù„Ø«ÙˆØ¨ ğŸ‘—", "Ø·ÙŠØ¨ Ø§Ù„Ø±Ø§Ø¦Ø­Ø© ğŸŒ¸", "Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø³Ø­ ğŸ‘Ÿ", "Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø³Ø© ğŸ§¼", "Ø³ÙˆØ§Ùƒ Ø§Ù„ÙÙ… ğŸ¦·", "ØºØ³Ù„ Ø§Ù„Ø¬Ù…Ø¹Ø© ğŸ•Œ", "Ø·Ù‡Ø§Ø±Ø© Ø§Ù„Ù‚Ù„Ø¨ ğŸ¤", "ØªÙ‚Ù„ÙŠÙ… Ø§Ù„Ø£Ø¸Ø§ÙØ± ğŸ’…", "Ø§Ù„Ø§Ø³ØªÙ†Ø´Ø§Ù‚ ğŸ‘ƒ", "Ø§Ù„ØªÙŠÙ…Ù… ğŸœï¸", "Ù…Ø³Ø­ Ø§Ù„Ø±Ø£Ø³ ğŸ§–â€â™€ï¸", "Ù†Ø¸Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§Ù† ğŸ ", "Ø³ØªØ± Ø§Ù„Ø¹ÙˆØ±Ø© ğŸ§¥", "Ø¢Ø¯Ø§Ø¨ Ø§Ù„Ø®Ù„Ø§Ø¡ ğŸšª", "ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ¶ÙˆØ¡ âœ¨", "Ø¥Ø³Ø¨Ø§Øº Ø§Ù„ÙˆØ¶ÙˆØ¡ ğŸŒŠ", "Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ø·Ù‡ÙˆØ± ğŸ’§"] },
            { title: "Sacred Connection", icon: "fa-kaaba", items: ["Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© ğŸ•Œ", "Ø§Ù„Ø³Ù†Ù† Ø§Ù„Ø±ÙˆØ§ØªØ¨ ğŸŒ±", "Ø³Ø¬Ø¯Ø© Ø§Ù„Ø´ÙƒØ± ğŸ¤²", "Ù„Ø¨Ø§Ø³ Ø§Ù„ØµÙ„Ø§Ø© ğŸ§•", "ØµÙ„Ø§Ø© Ø§Ù„ÙˆØªØ± ğŸŒŒ", "Ø§Ù„Ø®Ø´ÙˆØ¹ âœ¨", "ØµÙ„Ø§Ø© Ø§Ù„Ø¶Ø­Ù‰ â˜€ï¸", "ØªÙƒØ¨ÙŠØ±Ø© Ø§Ù„Ø¥Ø­Ø±Ø§Ù… ğŸ“¢", "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙØ§ØªØ­Ø© ğŸ“–", "Ø§Ù„Ø±ÙƒÙˆØ¹ Ø§Ù„Ø¹Ø¸ÙŠÙ… ğŸ™‡â€â™€ï¸", "Ø§Ù„Ø³Ø¬ÙˆØ¯ Ø§Ù„Ø·ÙˆÙŠÙ„ ğŸ§˜â€â™€ï¸", "Ø§Ù„ØªØ´Ù‡Ø¯ Ø§Ù„Ø£Ø®ÙŠØ± â˜ï¸", "Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµÙ„Ø§Ø© ğŸ“¿", "ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹Ø© ğŸ‘¥", "Ø§Ù„Ù…ØµÙ„Ù‰ Ø§Ù„Ù†Ø¸ÙŠÙ ğŸŒ¸", "Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØµÙ„Ø§Ø© â³", "Ù‚ÙŠØ§Ù… Ø§Ù„Ù„ÙŠÙ„ ğŸ•¯ï¸", "ØµÙ„Ø§Ø© Ø§Ù„Ø§Ø³ØªØ®Ø§Ø±Ø© ğŸ§­", "ØµÙ„Ø§Ø© Ø§Ù„Ø­Ø§Ø¬Ø© ğŸ¤²", "Ø¨Ø±ÙƒØ© Ø§Ù„ÙØ¬Ø± ğŸŒ…"] },
            { title: "Fast & Soul", icon: "fa-moon", items: ["ØµÙŠØ§Ù… Ø§Ù„Ø§Ø«Ù†ÙŠÙ† ğŸŒ™", "Ù‚Ø¶Ø§Ø¡ Ù…Ø§ ÙØ§Øª ğŸ“…", "Ø³Ø­ÙˆØ± Ø§Ù„Ø¨Ø±ÙƒØ© ğŸ¥£", "ÙƒÙ Ø§Ù„Ù„Ø³Ø§Ù† ğŸ¤", "ØµÙŠØ§Ù… Ø§Ù„Ø®Ù…ÙŠØ³ â˜€ï¸", "Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø¨ÙŠØ¶ âšª", "Ù†ÙŠØ© Ø§Ù„ØµÙŠØ§Ù… ğŸ¤", "ØªØ¹Ø¬ÙŠÙ„ Ø§Ù„Ø¥ÙØ·Ø§Ø± ğŸ½ï¸", "Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¥ÙØ·Ø§Ø± ğŸ¤²", "ØµØ¯Ù‚Ø© Ø§Ù„ØµØ§Ø¦Ù… ğŸ’°", "ØªØ±Ø§ÙˆÙŠØ­ Ø±Ù…Ø¶Ø§Ù† ğŸ•Œ", "Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø± âœ¨", "Ø§Ù„Ø§Ø¹ØªÙƒØ§Ù ğŸ§˜â€â™€ï¸", "Ø²ÙƒØ§Ø© Ø§Ù„ÙØ·Ø± ğŸŒ¾", "ØµÙŠØ§Ù… Ø§Ù„Ø³Øª ğŸŒ¸", "Ø¹Ø§Ø´ÙˆØ±Ø§Ø¡ ğŸŒŠ", "ÙŠÙˆÙ… Ø¹Ø±ÙØ© ğŸ•‹", "ØµÙŠØ§Ù… Ø§Ù„ØªØ·ÙˆØ¹ ğŸŒ±", "Ø§Ø¬ØªÙ†Ø§Ø¨ Ø§Ù„ØºÙŠØ¨Ø© ğŸš«", "Ø´ÙƒØ± Ø§Ù„Ù†Ø¹Ù…Ø© ğŸ¤²"] },
            { title: "Divine Words", icon: "fa-book-open", items: ["ØªÙ„Ø§ÙˆØ© ÙŠÙˆÙ…ÙŠØ© ğŸ“–", "ØªØ¯Ø¨Ø± Ø¢ÙŠØ© ğŸ’¡", "Ø­ÙØ¸ Ø³ÙˆØ±Ø© ğŸ’", "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¨Ø¥Ù†ØµØ§Øª ğŸ§", "ØªØ¬ÙˆÙŠØ¯ Ø§Ù„Ø­Ø±ÙˆÙ ğŸ—£ï¸", "Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† ğŸ…", "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù ğŸ•¯ï¸", "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ ğŸŒŒ", "Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ ğŸ›¡ï¸", "Ø§Ù„Ù…Ø¹ÙˆØ°Ø§Øª ğŸ¤²", "Ø³Ø¬ÙˆØ¯ Ø§Ù„ØªÙ„Ø§ÙˆØ© ğŸ™‡â€â™€ï¸", "ÙˆØ±Ø¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ğŸ”„", "ØªÙØ³ÙŠØ± Ù…ÙŠØ³Ø± ğŸ§ ", "Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù† âœ…", "ØªØ¹Ø¸ÙŠÙ… Ø§Ù„Ù…ØµØ­Ù âœ¨", "Ø¬Ù„Ø³Ø© Ø§Ù„Ø¶Ø­Ù‰ ğŸ“–", "ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØª ğŸ™ï¸", "Ù†Ø´Ø± Ø¢ÙŠØ© ğŸ“¢", "Ø§Ù„Ø§Ø³ØªØ´ÙØ§Ø¡ Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù† ğŸ©¹", "Ø­Ø¨ Ø§Ù„Ù‚Ø±Ø¢Ù† â¤ï¸"] },
            { title: "Zikr Flow", icon: "fa-beads", items: ["Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ â˜€ï¸", "Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡ ğŸŒ™", "Ø§Ø³ØªØºÙØ§Ø± Ø§Ù„Ø£Ø³Ø­Ø§Ø± â³", "Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ğŸ•Šï¸", "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ğŸ“¿", "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ğŸ¤²", "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ â˜ï¸", "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± ğŸ“¢", "Ø§Ù„Ø­ÙˆÙ‚Ù„Ø© âœ¨", "Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± ğŸ‘‘", "Ø§Ù„Ø¨Ø§Ù‚ÙŠØ§Øª Ø§Ù„ØµØ§Ù„Ø­Ø§Øª ğŸ’", "Ø°ÙƒØ± Ø§Ù„Ø®Ø±ÙˆØ¬ ğŸšª", "Ø°ÙƒØ± Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ ", "Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø³ÙˆÙ‚ ğŸ›ï¸", "Ø§Ø³ØªÙŠØ¯Ø§Ø¹ Ø§Ù„Ù„Ù‡ ğŸ”’", "Ø§Ù„ØªØ³Ø¨ÙŠØ­ Ø¨Ø§Ù„Ø£Ù†Ø§Ù…Ù„ ğŸ–ï¸", "Ø®Ù„ÙˆØ© Ø§Ù„Ø°ÙƒØ± ğŸ§˜â€â™€ï¸", "ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ù†ÙŠØ© ğŸ¤", "Ø§Ù„Ø±Ø¶Ø§ Ø¨Ø§Ù„Ù‚Ø¯Ø± âš–ï¸", "Ø¯ÙˆØ§Ù… Ø§Ù„ØµÙ„Ø© ğŸ”—"] },
            { title: "Modesty & Elegance", icon: "fa-gem", items: ["Ø­Ø¬Ø§Ø¨ Ø§Ù„Ù‚Ù„Ø¨ ğŸ’", "ØºØ¶ Ø§Ù„Ø¨ØµØ± ğŸ‘ï¸", "Ø­ÙŠØ§Ø¡ Ø§Ù„Ù‚ÙˆÙ„ ğŸ€", "Ø³Ù…Ùˆ Ø§Ù„ÙÙƒØ± ğŸ§ ", "Ø­Ø¬Ø§Ø¨ Ø§Ù„Ø¬Ø³Ø¯ ğŸ§•", "ØªØ±Ùƒ Ø§Ù„ØªØ¨Ø±Ø¬ ğŸ’„", "Ù„Ø¨Ø§Ø³ Ø³Ø§ØªØ± ğŸ‘—", "Ù…Ø´ÙŠØ© Ø¨ÙˆÙ‚Ø§Ø± ğŸš¶â€â™€ï¸", "Ø£Ø¯Ø¨ Ø§Ù„Ø­Ø¯ÙŠØ« ğŸ—£ï¸", "Ø­ÙØ¸ Ø§Ù„Ø³Ø± ğŸ¤", "Ø§Ù„Ø§Ø¹ØªØ²Ø§Ø² Ø¨Ø§Ù„Ù‡ÙˆÙŠØ© ğŸš©", "Ø¬Ù…Ø§Ù„ Ø§Ù„Ø¨Ø§Ø·Ù† âœ¨", "ØªØ±Ùƒ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ âŒ", "Ø§Ù„Ù‚Ø¯ÙˆØ© Ø§Ù„ØµØ§Ù„Ø­Ø© ğŸ‘¤", "Ø¹ÙØ© Ø§Ù„ÙŠØ¯ ğŸ¤", "Ù†Ù‚Ø§Ø¡ Ø§Ù„Ø³Ù…Ø¹ ğŸ‘‚", "Ø·Ù‡Ø§Ø±Ø© Ø§Ù„ÙÙƒØ± ğŸ’­", "Ø§Ù„ØªÙˆØ§Ø¶Ø¹ ğŸ™‡â€â™€ï¸", "ØªØ±Ùƒ Ø§Ù„ØªÙØ§Ø®Ø± ğŸš«", "Ø­Ø¨ Ø§Ù„Ø³ØªØ± ğŸ›¡ï¸"] },
            { title: "Family Harmony", icon: "fa-house-heart", items: ["Ø¨Ø± Ø§Ù„ÙˆØ§Ù„Ø¯ÙŠÙ† ğŸŒ³", "Ù…ÙˆØ¯Ø© Ø§Ù„Ø²ÙˆØ¬ â¤ï¸", "Ø±Ø­Ù…Ø© Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡ ğŸ£", "ØµÙ„Ø© Ø§Ù„Ø±Ø­Ù… ğŸ”—", "Ø¥ÙƒØ±Ø§Ù… Ø§Ù„Ø¶ÙŠÙ â˜•", "Ø­Ø³Ù† Ø§Ù„Ø¬ÙˆØ§Ø± ğŸ ", "ØªØ±Ø¨ÙŠØ© Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© ğŸ§’", "ØµØ¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°Ù‰ ğŸ›¡ï¸", "ÙƒÙ„Ù…Ø© Ø·ÙŠØ¨Ø© ğŸ—£ï¸", "ØµÙ„Ø­ Ø¨ÙŠÙ† Ø§Ù„Ù†Ø§Ø³ ğŸ¤", "Ø­ÙØ¸ ØºÙŠØ¨Ø© Ø§Ù„Ø²ÙˆØ¬ ğŸ¤", "Ø¯Ø¹Ø§Ø¡ Ù„Ù„Ø£Ù‡Ù„ ğŸ¤²", "Ø¥Ø³Ø¹Ø§Ø¯ Ø§Ù„ØµØºØ§Ø± ğŸ­", "ØªÙˆÙ‚ÙŠØ± Ø§Ù„ÙƒØ¨Ø§Ø± ğŸ§“", "Ø¹Ø¯Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡ âš–ï¸", "Ù‡Ø¯ÙŠØ© Ù…Ø­Ø¨Ø© ğŸ", "Ø¨ÙŠØª Ø³Ø¹ÙŠØ¯ ğŸ¡", "ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ğŸ³ï¸", "Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø£Ù‡Ù„ ğŸ§ ", "Ø£Ù…Ø§Ù†Ø© Ø§Ù„Ø¨ÙŠØª ğŸ”‘"] },
            { title: "The Shield", icon: "fa-shield-halved", items: ["ØªØ±Ùƒ Ø§Ù„ØºÙŠØ¨Ø© ğŸš«", "ØªØ±Ùƒ Ø§Ù„Ù†Ù…ÙŠÙ…Ø© ğŸ¤", "ØµØ¯Ù‚ Ø§Ù„Ø­Ø¯ÙŠØ« âœ…", "Ø­ÙØ¸ Ø§Ù„Ø¹ÙŠÙ† ğŸ‘ï¸", "ØªØ±Ùƒ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‡Ø§Ø¨Ø· ğŸ›¡ï¸", "Ø£Ù…Ø§Ù†Ø© Ø§Ù„Ù…Ø¬Ø§Ù„Ø³ ğŸ¤", "ØªØ±Ùƒ Ø§Ù„Ø³Ø®Ø±ÙŠØ© âŒ", "Ø±Ø¯ Ø§Ù„Ù…Ø¸Ø§Ù„Ù… âš–ï¸", "ØªØ±Ùƒ Ø§Ù„Ø­Ø³Ø¯ ğŸ§¿", "Ø³Ù„Ø§Ù…Ø© Ø§Ù„ØµØ¯Ø± ğŸ¤", "Ø§Ù„ÙˆÙØ§Ø¡ Ø¨Ø§Ù„Ø¹Ù‡Ø¯ ğŸ¤", "ØªØ±Ùƒ Ø§Ù„Ù…Ø±Ø§Ø¡ ğŸ—£ï¸", "Ø§Ù„Ø¨Ø¹Ø¯ Ø¹Ù† Ø§Ù„Ø´Ø¨Ù‡Ø§Øª ğŸŒ€", "ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø³Ø±Ø§Ù ğŸ’¸", "Ø­ÙØ¸ Ø§Ù„Ø¬ÙˆØ§Ø±Ø­ ğŸ–ï¸", "ØªØ±Ùƒ Ø³ÙˆØ¡ Ø§Ù„Ø¸Ù† ğŸ’­", "Ø§Ù„ØªØ­Ù„Ù„ Ù…Ù† Ø§Ù„Ø°Ù†Ø¨ âœ¨", "Ø§Ù„Ø«Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ ğŸš©", "Ù‚ÙˆØ© Ø§Ù„Ø¥Ø±Ø§Ø¯Ø© ğŸ’ª", "Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ù‡ ğŸ‘ï¸"] },
            { title: "Mindfulness", icon: "fa-spa", items: ["Ø§Ù„Ø±Ø¶Ø§ Ø¨Ø§Ù„Ù‚Ø¯Ø± âš–ï¸", "Ø­Ø³Ù† Ø§Ù„Ø¸Ù† Ø¨Ø§Ù„Ù„Ù‡ ğŸŒˆ", "ØªÙØ±ÙŠØº Ø§Ù„Ù‡Ù… Ø¨Ø§Ù„Ø°ÙƒØ± ğŸŒ¬ï¸", "Ø§Ù„ØªÙØ§Ø¤Ù„ âœ¨", "Ø§Ù„ÙŠÙ‚ÙŠÙ† ğŸ¯", "Ø§Ù„Ø§Ù…ØªÙ†Ø§Ù† Ø§Ù„ÙŠÙˆÙ…ÙŠ ğŸ™", "ØªØ£Ù…Ù„ Ù…Ù„ÙƒÙˆØª Ø§Ù„Ù„Ù‡ ğŸŒŒ", "Ø³ÙƒÙˆÙ† Ø§Ù„Ø±ÙˆØ­ ğŸ•¯ï¸", "Ø§Ù„Ø§Ø³ØªØ³Ù„Ø§Ù… Ù„Ù„Ù‡ ğŸ³ï¸", "Ø·Ø±Ø¯ Ø§Ù„ÙˆØ³Ø§ÙˆØ³ ğŸ§ ", "Ø­Ø¨ Ø§Ù„Ø®ÙŠØ± Ù„Ù„ØºÙŠØ± â¤ï¸", "Ø§Ù„Ø«Ù‚Ø© Ø¨ÙˆØ¹Ø¯ Ø§Ù„Ù„Ù‡ ğŸ“œ", "Ù‡Ø¬Ø± Ø§Ù„Ù‚Ù„Ù‚ ğŸŒŠ", "ØµØ¨Ø± Ø¹Ù†Ø¯ Ø§Ù„ØµØ¯Ù…Ø© ğŸ’", "Ø§Ø³ØªØ±Ø¬Ø§Ø¹ (Ø¥Ù†Ø§ Ù„Ù„Ù‡) ğŸ¤²", "ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù…Ù„ ğŸŒ…", "Ø§Ù„Ù‡Ø¯ÙˆØ¡ Ø¹Ù†Ø¯ Ø§Ù„ØºØ¶Ø¨ ğŸ§Š", "Ù†Ù‚Ø§Ø¡ Ø§Ù„Ø®ÙŠØ§Ù„ ğŸ’­", "Ø§Ù„Ø³ÙƒÙŠÙ†Ø© ÙÙŠ Ø§Ù„ØµÙ„Ø§Ø© ğŸ•Œ", "Ø¨ØµÙŠØ±Ø© Ø§Ù„Ù‚Ù„Ø¨ ğŸ’¡"] },
            { title: "Good Deeds", icon: "fa-hand-holding-heart", items: ["ØµØ¯Ù‚Ø© Ø®ÙÙŠØ© ğŸ’°", "Ø¥Ù…Ø§Ø·Ø© Ø§Ù„Ø£Ø°Ù‰ ğŸŒ¿", "Ø¥ÙØ´Ø§Ø¡ Ø§Ù„Ø³Ù„Ø§Ù… ğŸ•Šï¸", "Ù†ÙØ¹ Ø§Ù„Ù†Ø§Ø³ ğŸ¤", "Ø³Ù‚ÙŠ Ù…Ø§Ø¡ ğŸ’§", "Ø¥Ø·Ø¹Ø§Ù… Ù…Ø³ÙƒÙŠÙ† ğŸ²", "Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø³Ø±ÙˆØ± ğŸ‰", "ÙƒÙØ§Ù„Ø© ÙŠØªÙŠÙ… ğŸ‘¶", "Ø²ÙŠØ§Ø±Ø© Ù…Ø±ÙŠØ¶ ğŸ¥", "Ø¥Ø¹Ø§Ù†Ø© Ù…Ø­ØªØ§Ø¬ ğŸ†˜", "Ù†ØµÙŠØ­Ø© Ø¨ÙˆØ¹ÙŠ ğŸ’¡", "Ø¯Ø¹Ø§Ø¡ Ø¨Ø¸Ù‡Ø± Ø§Ù„ØºÙŠØ¨ ğŸ‘¤", "ØªÙŠØ³ÙŠØ± Ø¹Ù„Ù‰ Ù…Ø¹Ø³Ø± ğŸ’¸", "Ø³ØªØ± Ù…Ø³Ù„Ù… ğŸ›¡ï¸", "Ø§Ù„Ø±ÙÙ‚ Ø¨Ø§Ù„Ø­ÙŠÙˆØ§Ù† ğŸˆ", "Ù†Ø´Ø± Ø¹Ù„Ù… Ù†Ø§ÙØ¹ ğŸ“š", "ØªØ¨Ø³Ù…Ùƒ ØµØ¯Ù‚Ø© ğŸ˜Š", "ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù…Ø¹Ø±ÙˆÙ ğŸ› ï¸", "Ù‚Ø¶Ø§Ø¡ Ø­ÙˆØ§Ø¦Ø¬ ğŸš¶â€â™€ï¸", "Ø¥Ø®Ù„Ø§Øµ Ø§Ù„Ø¹Ù…Ù„ ğŸ¤"] },
            { title: "Time Mastery", icon: "fa-hourglass-start", items: ["Ø¨Ø±ÙƒØ© Ø§Ù„Ø¨ÙƒÙˆØ± ğŸŒ…", "ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ù‡Ø§Ù… ğŸ“…", "ØªØ±Ùƒ Ù…Ø§ Ù„Ø§ ÙŠØ¹Ù†ÙŠ â³", "Ø§Ø³ØªØºÙ„Ø§Ù„ Ø§Ù„ÙØ±Ø§Øº ğŸ’¡", "ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø± ÙˆÙ‚ØªØ§Ù‹ ğŸ•Œ", "Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙˆØ±Ø§Ø¯ ğŸ“–", "Ø¥Ù†Ø¬Ø§Ø² Ø¹Ù…Ù„ÙŠ ğŸ¯", "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ø´Ø§Øª ğŸ“±", "Ù‚ÙŠÙ„ÙˆÙ„Ø© Ù‚ØµÙŠØ±Ø© ğŸ’¤", "Ù‚Ø±Ø§Ø¡Ø© Ù…ÙÙŠØ¯Ø© ğŸ“š", "ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø© ğŸ› ï¸", "Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù†ÙØ³ âš–ï¸", "Ø§Ù„Ù†ÙˆÙ… Ù…Ø¨ÙƒØ±Ø§Ù‹ ğŸŒ‘", "ØµÙ„Ø© Ø±Ø­Ù… Ù‡Ø§ØªÙÙŠØ© ğŸ“", "ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙƒØ§Ù† ğŸ§¹", "Ø³Ø§Ø¹Ø© Ø¥Ø¬Ø§Ø¨Ø© ğŸ¤²", "Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø¨ÙˆØ¯ÙƒØ§Ø³Øª ğŸ§", "ØªØ­Ø¶ÙŠØ± Ù…Ø³Ø¨Ù‚ ğŸ“", "Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© ğŸƒâ€â™€ï¸", "Ù‚ÙŠÙ…Ø© Ø§Ù„Ù„Ø­Ø¸Ø© ğŸ’"] },
            { title: "Intellectual Growth", icon: "fa-brain", items: ["ÙÙ‡Ù… Ø§Ù„Ù…Ù‚Ø§ØµØ¯ ğŸ§ ", "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙŠØ±Ø© ğŸ“š", "ÙÙ‚Ù‡ Ø§Ù„ÙˆØ§Ù‚Ø¹ ğŸŒ", "Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù„Ù… âœï¸", "Ø­Ø¶ÙˆØ± Ù…Ø¬Ù„Ø³ Ø¹Ù„Ù… ğŸ•Œ", "Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙÙ‚Ù‡ ğŸ“œ", "Ø³ÙŠØ± Ø§Ù„ØµØ­Ø§Ø¨ÙŠØ§Øª ğŸ‘‘", "Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ù…Ø§Ù„ÙŠ ğŸ’°", "Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© ğŸ“–", "Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¯Ù„ÙŠÙ„ ğŸ”", "ØªØ·ÙˆÙŠØ± Ø§Ù„ØªÙÙƒÙŠØ± ğŸ’¡", "Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø­Ù„Ø§Ù„ âš–ï¸", "Ø§Ù„ÙˆØ³Ø·ÙŠØ© âœ¨", "Ø§Ù„Ø­ÙˆØ§Ø± Ø§Ù„Ù‡Ø§Ø¯Ø¦ ğŸ—£ï¸", "Ø§Ù„Ø§Ø¹ØªØ²Ø§Ø² Ø¨Ø§Ù„Ø¯ÙŠÙ† ğŸš©", "ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø®ØµØ§Øª ğŸ“", "ØªØ¹Ù„Ù… Ø§Ù„Ù„ØºØ© ğŸ—£ï¸", "ÙÙ‚Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ğŸ¤", "Ø§Ù„ØªÙÙƒØ± ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª ğŸŒŒ", "Ù†Ø´Ø± Ø§Ù„ÙˆØ¹ÙŠ ğŸ“¢"] },
            { title: "Self-Care", icon: "fa-heart", items: ["Ù†ÙˆÙ… Ø¹Ù„Ù‰ Ø·Ù‡Ø§Ø±Ø© ğŸ’¤", "Ø±ÙŠØ§Ø¶Ø© Ø¨Ù†ÙŠØ© ğŸ’ª", "Ø£ÙƒÙ„ Ø·ÙŠØ¨ ğŸ", "ØªØ±Ø·ÙŠØ¨ Ø§Ù„ÙŠØ¯ÙŠÙ† ğŸ§´", "Ø¬Ù…Ø§Ù„ Ø§Ù„Ø­Ø¬Ø§Ø¨ ğŸ§•", "Ø´Ø±Ø¨ Ù…Ø§Ø¡ ÙƒØ§ÙÙ ğŸ’§", "Ù‡Ø¯ÙˆØ¡ Ø§Ù„Ø£Ø¹ØµØ§Ø¨ ğŸ§˜â€â™€ï¸", "Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø© ğŸŒ¸", "Ø§Ù„Ø§Ø³ØªØ±Ø®Ø§Ø¡ ğŸ•¯ï¸", "Ø§Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø´Ø®ØµÙŠØ© ğŸš¿", "Ø±Ø§Ø¦Ø­Ø© Ø¹Ø·Ø±Ø© (Ù„Ù„Ø¨ÙŠØª) ğŸ ", "Ø±Ø§Ø­Ø© Ø§Ù„Ø¹ÙŠÙ† ğŸ‘ï¸", "Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ğŸŒ¬ï¸", "ÙÙŠØªØ§Ù…ÙŠÙ†Ø§Øª Ø§Ù„Ø±ÙˆØ­ ğŸ“¿", "Ù…Ù„Ø§Ø¨Ø³ Ù…Ø±ÙŠØ­Ø© ğŸ‘—", "Ø­Ù…Ø§Ù… Ø¯Ø§ÙØ¦ ğŸ›", "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø³ÙƒØ± âŒ", "Ø§Ù„Ù…Ø´ÙŠ ÙÙŠ Ø§Ù„Ù‡ÙˆØ§Ø¡ ğŸŒ³", "Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ğŸ—£ï¸", "Ø­Ø¨ Ø§Ù„Ø°Ø§Øª Ø´Ø±Ø¹Ø§Ù‹ â¤ï¸"] },
            { title: "Generosity", icon: "fa-coins", items: ["Ø²ÙƒØ§Ø© Ø§Ù„Ù…Ø§Ù„ ğŸ’°", "Ø²ÙƒØ§Ø© Ø§Ù„Ø¹Ù„Ù… ğŸ’¡", "Ø²ÙƒØ§Ø© Ø§Ù„Ø¬Ù…Ø§Ù„ ğŸ’", "Ø¥Ø·Ø¹Ø§Ù… Ø·ÙŠØ± ğŸ¦", "ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ© ğŸŒŠ", "Ø¥Ù‡Ø¯Ø§Ø¡ ÙƒØªØ¨ ğŸ“š", "ÙƒØ³ÙˆØ© Ù…Ø­ØªØ§Ø¬ ğŸ‘—", "ØªÙØ±ÙŠØ¬ ÙƒØ±Ø¨Ø© ğŸ”“", "ÙˆÙ‚Ù Ø¨Ø³ÙŠØ· ğŸ—ï¸", "Ø¯Ø¹Ù… Ø£Ø±Ù…Ù„Ø© ğŸ‘µ", "Ø¥ÙØ·Ø§Ø± ØµØ§Ø¦Ù… ğŸ½ï¸", "Ø´ÙƒØ± Ø§Ù„Ù…Ø­Ø³Ù† ğŸ¤", "Ø³Ø®Ø§Ø¡ Ø§Ù„Ù†ÙØ³ âœ¨", "ØªØ±Ùƒ Ø§Ù„Ø´Ø­ âŒ", "ÙƒØ±Ù… Ø§Ù„Ø¶ÙŠØ§ÙØ© â˜•", "ØªÙŠØ³ÙŠØ± Ø§Ù„Ù…Ù‡ÙˆØ± ğŸ’", "Ù…Ø³Ø§Ù‡Ù…Ø© ÙÙŠ Ù…Ø³Ø¬Ø¯ ğŸ•Œ", "Ø¨Ù†Ø§Ø¡ Ø¨Ø¦Ø± ğŸ’§", "Ù†ÙØ¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ğŸŒ", "Ø¹Ø·Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª â³"] },
            { title: "The Eternal Home", icon: "fa-cloud", items: ["ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙˆØ¨Ø© âœ¨", "ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙˆØµÙŠØ© ğŸ“", "Ø°ÙƒØ± Ø§Ù„Ù…ÙˆØª Ø¨ÙŠÙ‚ÙŠÙ† âŒ›", "Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„Ù‚Ø¨Ø± ğŸŒ‘", "Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø¬Ù†Ø© ğŸŒˆ", "Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù†Ø§Ø± ğŸ”¥", "Ø­Ø³Ù† Ø§Ù„Ø®Ø§ØªÙ…Ø© ğŸ¤²", "Ù„Ù‚Ø§Ø¡ Ø§Ù„Ù„Ù‡ â¤ï¸", "ØªØµÙÙŠØ© Ø§Ù„Ø­Ù‚ÙˆÙ‚ âš–ï¸", "Ø§Ù„Ø¹Ù…Ù„ Ù„Ù„Ø¢Ø®Ø±Ø© ğŸ¯", "Ø°ÙƒØ± Ù‡Ø§Ø¯Ù… Ø§Ù„Ù„Ø°Ø§Øª âŒ›", "Ø§Ù„Ø´ÙˆÙ‚ Ù„Ù„Ø±Ø³ÙˆÙ„ ğŸ•Šï¸", "Ù‚ØµØ± Ø§Ù„Ø£Ù…Ù„ â³", "Ø§Ø³ØªÙŠØ¯Ø§Ø¹ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ğŸ”’", "ØµØ¯Ù‚ Ø§Ù„ØªÙˆØ¬Ù‡ ğŸ¹", "Ø§Ù„Ø«Ø¨Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø¤Ø§Ù„ ğŸ—£ï¸", "ØµØ­Ø¨Ø© Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ† ğŸ‘¥", "Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø¨Ø§Ù„Ø«Ø¨Ø§Øª ğŸ¤²", "Ø­Ø¨ Ø§Ù„ØµØ§Ù„Ø­ÙŠÙ† ğŸ¤", "Ø§Ù„Ø®Ø§ØªÙ…Ø© Ø§Ù„Ø­Ø³Ù†Ø© ğŸŒ…"] }
        ];

        function init() {
            const grid = document.getElementById('fiqh-grid');
            fiqhData.forEach(cat => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.innerHTML = `<i class="fas ${cat.icon}"></i><span>${cat.title}</span>`;
                card.onclick = () => openOptions(cat.title, cat.items);
                grid.appendChild(card);
            });
        }

        function openOptions(title, items) {
            let html = `<div class="swal-grid">`;
            items.forEach(i => {
                html += `<div class="swal-btn" onclick="saveAndAnalyze('${title}', '${i}')">${i}</div>`;
            });
            html += `</div>`;
            Swal.fire({ title: title, html: html, showConfirmButton: false, showCloseButton: true });
        }

        async function saveAndAnalyze(cat, val) {
            Swal.close();
            nav('ai');
            const chat = document.getElementById('ai-chat-box');
            chat.innerHTML = `<div style="text-align:center; padding:20px;"><i class="fas fa-magic fa-spin" style="color:var(--purp); font-size:30px;"></i><br>Ø±Ù‚Ø© ØªØ­Ù„Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒÙ Ø§Ù„ÙÙ‚Ù‡ÙŠØ© ÙˆØªØ¹Ø¯ Ù„ÙƒÙ Ø±Ø¯Ø§Ù‹ Ù…ÙˆØ³Ø¹Ø§Ù‹...</div>`;

            try {
                // 1. Ø§Ù„Ø­ÙØ¸ ÙÙŠ Neon
                await fetch('/api/save-health', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ user_id: 1, category: cat, value: 0, note: val })
                });

                // 2. Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆØ³Ø¹ Ø¹Ø¨Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ
                const res = await fetch('/api/raqqa-ai', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ prompt: `Ø¨ØµÙØªÙƒ Ø±Ù‚Ø©ØŒ Ø­Ù„Ù„ÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¯Ø®Ù„ Ø§Ù„ÙÙ‚Ù‡ÙŠ Ù„Ù„Ù…Ø±Ø£Ø©: (${cat} - ${val}). Ù‚Ø¯Ù…ÙŠ Ø´Ø±Ø­Ø§Ù‹ ÙÙ‚Ù‡ÙŠØ§Ù‹ Ø±Ù‚ÙŠÙ‚Ø§Ù‹ØŒ Ù†ØµÙŠØ­Ø© ØªØ±Ø¨ÙˆÙŠØ©ØŒ ÙˆØ¢ÙŠØ© Ø£Ùˆ Ø­Ø¯ÙŠØ«Ø§Ù‹ØŒ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù…ÙˆØ³Ø¹ ÙŠØ¨Ø¹Ø« Ø§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø©.` })
                });
                const data = await res.json();
                
                chat.innerHTML = `<div style="padding:10px;">
                    <h4 style="color:var(--purp); border-bottom:1px solid #eee;">ØªØ­Ù„ÙŠÙ„ Ø±Ù‚Ø© Ù„Ù€ (${val}):</h4>
                    <p>${data.reply}</p>
                    <small style="color:var(--gold)">ØªÙ… Ø­ÙØ¸ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¯Ø®Ù„ ÙÙŠ Ø³Ø¬Ù„ÙƒÙ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ÙŠ âœ¨</small>
                </div>`;
                saveLocal(val, data.reply);
            } catch (e) {
                chat.innerHTML = `ØªÙ… Ø­ÙØ¸ (${val}) ÙÙŠ Ø§Ù„Ø³Ø¬Ù„. Ø±Ù‚Ø© Ø³ØªÙˆØ§ÙÙŠÙƒ Ø¨Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.`;
            }
        }

        function sendToAI() {
            const input = document.getElementById('ai-input');
            if(input.value) { saveAndAnalyze('Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ø§Ù…', input.value); input.value = ''; }
        }

        function nav(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
        }

        // Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡
        function startMic() { Swal.fire('Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†', 'Ø±Ù‚Ø© ØªØ³Ù…Ø¹ÙƒÙ Ø§Ù„Ø¢Ù†.. ØªÙØ¶Ù„ÙŠ Ø¨Ø§Ù„Ø¨ÙˆØ­ Ø§Ù„ÙÙ‚Ù‡ÙŠ', 'info'); }
        function openCam() { Swal.fire('Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§', 'Ø§Ù„ØªÙ‚Ø·ÙŠ ØµÙˆØ±Ø© Ù„Ù…Ø§ ØªÙˆØ¯ÙŠÙ† Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù†Ù‡ Ø´Ø±Ø¹Ø§Ù‹', 'info'); }
        function uploadImg() { Swal.fire('Ø±ÙØ¹ ØµÙˆØ±Ø©', 'Ø§Ø±ÙØ¹ÙŠ ØµÙˆØ±Ø© Ù„ØªØ­Ù„ÙŠÙ„Ù‡Ø§ ÙÙ‚Ù‡ÙŠØ§Ù‹ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ', 'info'); }
        
        function saveLocal(q, r) {
            let h = JSON.parse(localStorage.getItem('fiqh_hist') || '[]');
            h.push({t: new Date().toLocaleString('ar-EG'), q, r});
            localStorage.setItem('fiqh_hist', JSON.stringify(h));
        }

        function showHistory() {
            let h = JSON.parse(localStorage.getItem('fiqh_hist') || '[]');
            let html = h.reverse().map(i => `<div style="text-align:right; border-bottom:1px solid #eee; padding:10px;"><small>${i.t}</small><br><b>${i.q}</b><br><p style="font-size:14px; color:var(--purp);">${i.r}</p></div>`).join('');
            Swal.fire({ title: 'Ø³Ø¬Ù„ Ø±ÙÙŠÙ‚Ø© Ø§Ù„Ø¯Ø±Ø¨', html: html || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙØ¸Ø©' });
        }

        window.onload = init;
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø±Ù‚Ø© - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-pink: #e91e63;
            --soft-pink: #fce4ec;
            --gemini-blue: #2196F3;
            --delete-red: #f44336;
            --upload-green: #4CAF50;
        }

        body { font-family: 'Tajawal', sans-serif; background-color: #f4f4f9; color: #4a4a4a; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        h1 { color: var(--primary-pink); text-align: center; margin-bottom: 30px; font-size: 2rem; }
        h2 { border-bottom: 3px solid var(--soft-pink); padding-bottom: 10px; margin-top: 40px; color: #6a6a6a; font-size: 1.4rem; }
        label { display: block; margin-bottom: 8px; font-weight: 700; color: #6a6a6a; }
        input[type="text"], input[type="password"], textarea, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        input:focus, textarea:focus, select:focus { border-color: var(--primary-pink); outline: none; }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´ØªØ±Ùƒ */
        button {
            color: white;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            transition: background-color 0.3s, transform 0.2s;
            margin-top: 10px;
        }
        button:active { transform: translateY(1px); }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø®ØµØµØ© */
        .btn-login { background-color: var(--primary-pink); }
        .btn-login:hover { background-color: #c2185b; }

        .btn-save { background-color: #00bcd4; /* Ù„ÙˆÙ† Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø­ÙØ¸ */ }
        .btn-save:hover { background-color: #0097a7; }

        .btn-gemini { background-color: var(--gemini-blue); }
        .btn-gemini:hover { background-color: #1565c0; }

        .btn-delete { background-color: var(--delete-red); }
        .btn-delete:hover { background-color: #d32f2f; }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª */
        .upload-section button { background-color: var(--upload-green); margin-top: 0; }
        .upload-section button:hover { background-color: #388e3c; }

        /* Ø§Ù„Ø´Ø¨ÙƒØ§Øª ÙˆØ§Ù„ØªØ®Ø·ÙŠØ· */
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .upload-item { background-color: #fce4ec; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .upload-item input[type="file"] { margin-bottom: 10px; }

        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            display: none;
            font-weight: 700;
        }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #cce5ff; color: #004085; border: 1px solid #b8daff; }
        #admin-content { display: none; }
    </style>
</head>
<body>

    <div class="container">
        <h1><i class="fas fa-user-shield"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø±Ù‚Ø©</h1>

        <div id="login-form">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <label for="username">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
            <input type="text" id="username" placeholder="zazo" required>

            <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
            <input type="password" id="password" placeholder="zazo010988" required>
            
            <button class="btn-login" onclick="checkCredentials()"><i class="fas fa-sign-in-alt"></i> Ø¯Ø®ÙˆÙ„</button>
            <p id="login-error" style="color: var(--delete-red); text-align: center; margin-top: 10px; display: none;">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.</p>
        </div>

        <div id="admin-content">
            
            <h2><i class="fas fa-brain"></i> ØªÙˆÙ„ÙŠØ¯ Ù…Ø­ØªÙˆÙ‰ Ø°ÙƒÙŠ (Gemini)</h2>
            <form onsubmit="fetchGeminiContent(event)">
                <label for="gemini-prompt">Ø§Ø·Ù„Ø¨ Ù…Ø­ØªÙˆÙ‰ (Ø§Ù‚ØªØ¨Ø§Ø³ØŒ Ù†ØµÙŠØ­Ø©ØŒ Ø´Ø¹Ø±ØŒ Ù…Ù‚Ø§Ù„):</label>
                <textarea id="gemini-prompt" rows="3" placeholder="Ø§Ø·Ù„Ø¨ Ù†ØµÙŠØ­Ø© Ø¹Ù† Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø·ÙÙ„ Ø±Ø¶ÙŠØ¹ Ø£Ùˆ Ø§Ù‚ØªØ¨Ø§Ø³ Ø¹Ù† Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©..." required></textarea>
                <button type="submit" class="btn-gemini"><i class="fas fa-magic"></i> Ø¬Ù„Ø¨ Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯</button>
                <div id="gemini-result" class="message info"></div>
            </form>
            
            <hr style="margin-top: 30px; border-color: #fce4ec;">

            <h2><i class="fas fa-keyboard"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ù†ØµÙŠ ÙŠØ¯ÙˆÙŠ / Ø­ÙØ¸ Ù…Ø­ØªÙˆÙ‰ Gemini</h2>
            <form id="postForm" onsubmit="savePost(event)">
                
                <label for="content">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ØµÙŠ:</label>
                <textarea id="content" rows="6" placeholder="Ø§Ù„ØµÙ‚ Ù‡Ù†Ø§ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ÙˆÙ„Ù‘Ø¯Ù‡ Gemini Ø£Ùˆ Ø§ÙƒØªØ¨ Ù†ØµÙƒ Ø§Ù„Ø®Ø§Øµ..." required></textarea>

                <div class="grid-container" style="grid-template-columns: 1fr 1fr;">
                    <div>
                        <label for="section">Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù‚Ø³Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Section ID):</label>
                        <input type="text" id="section" placeholder="Ù…Ø«Ù„: bouh-display-1" required>
                    </div>
                    <div>
                        <label for="type">ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Category):</label>
                        <select id="type" required>
                            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</option>
                            <option value="Ø§Ù„Ù…Ø´Ø§Ø¹Ø±">Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</option>
                            <option value="Ø§Ù„Ù…Ø¬ØªÙ…Ø¹">Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</option>
                            <option value="Ø§Ù„ØµØ­Ø©">Ø§Ù„ØµØ­Ø©</option>
                            <option value="Ø§Ù„ÙÙ‚Ù‡">Ø§Ù„ÙÙ‚Ù‡</option>
                            <option value="Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©">Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</option>
                            <option value="Ø¹Ø§Ù…">Ø¹Ø§Ù…</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn-save"><i class="fas fa-database"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙÙŠ Neon DB</button>
            </form>
            <div id="message" class="message success"></div>

            <hr style="margin-top: 30px; border-color: #fce4ec;">

            <h2><i class="fas fa-file-upload"></i> Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© (ÙÙŠØ¯ÙŠÙˆØŒ ØµÙˆØ±ØŒ Ø¥Ù„Ø®)</h2>
            <div class="grid-container upload-section">
                <div class="upload-item">
                    <label for="media-file"><i class="fas fa-video"></i> ÙÙŠØ¯ÙŠÙˆ / ØµÙˆØ±Ø© / Ø¨ÙˆØ³Øª</label>
                    <input type="file" id="media-file" accept="image/*,video/*" style="width: auto;">
                    <button onclick="handleFileUpload('media')">Ø±ÙØ¹ ÙˆØ³Ø§Ø¦Ø·</button>
                </div>
                <div class="upload-item">
                    <label for="doc-file"><i class="fas fa-file-alt"></i> Ù…Ù‚Ø§Ù„ / Ø¨Ø­Ø« / Ø´Ø¹Ø± (Ù…Ù„Ù)</label>
                    <input type="file" id="doc-file" accept=".pdf,.doc,.docx,.txt" style="width: auto;">
                    <button onclick="handleFileUpload('document')">Ø±ÙØ¹ Ù…Ø³ØªÙ†Ø¯</button>
                </div>
            </div>
            <div id="upload-message" class="message error"></div>
            
            <hr style="margin-top: 30px; border-color: #fce4ec;">


            <h2><i class="fas fa-eraser"></i> Ø­Ø°Ù Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Neon DB</h2>
            <form id="deleteForm" onsubmit="deletePost(event)">
                <label for="deleteId">Ù…ÙØ¹Ø±Ù‘Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ± (ID):</label>
                <input type="text" id="deleteId" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ID Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø§Ù„Ù…Ø±Ø§Ø¯ Ø­Ø°ÙÙ‡" required>
                <button type="submit" class="btn-delete"><i class="fas fa-trash"></i> Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±</button>
            </form>
            <div id="delete-message" class="message error"></div>

        </div>
    </div>

    <script>
        // ==========================================================
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± - ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø·Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ
        // ==========================================================
        
        const BASE_URL = 'https://raqqa-v6cd.vercel.app'; 
        const API_SAVE_POST = BASE_URL + '/api/save-post'; 
        const API_DELETE_POST = BASE_URL + '/api/delete-post'; 
        // âš ï¸ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø¯Ø§Ù„Ø© Gemini Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø£Ù† ØªÙ‚ÙˆÙ…ÙŠ Ø¨ØªØ«Ø¨ÙŠØªÙ‡Ø§ ÙˆØªØ¹Ø¯ÙŠÙ„Ù‡Ø§
        const API_GEMINI_GENERATE = BASE_URL + '/api/gemini'; 
        
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        const ADMIN_USERNAME = 'zazo'; 
        const ADMIN_PASSWORD = 'zazo010988'; 

        // ==========================================================
        // ÙˆØ¸Ø§Ø¦Ù ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        // ==========================================================

        function checkCredentials() {
            const inputUsername = document.getElementById('username').value.trim();
            const inputPassword = document.getElementById('password').value;
            const errorMsg = document.getElementById('login-error');
            
            if (inputUsername === ADMIN_USERNAME && inputPassword === ADMIN_PASSWORD) {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('admin-content').style.display = 'block';
                errorMsg.style.display = 'none';
            } else {
                errorMsg.style.display = 'block';
            }
        }

        // ==========================================================
        // ÙˆØ¸ÙŠÙØ© Ø¬Ù„Ø¨ Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Gemini API (ØªÙˆÙ‚Ø¹ Ù†Øµ Ù„Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ)
        // ==========================================================
        
        async function fetchGeminiContent(event) {
            event.preventDefault();
            const prompt = document.getElementById('gemini-prompt').value.trim();
            const resultDiv = document.getElementById('gemini-result');
            const contentTextarea = document.getElementById('content');

            if (!prompt) {
                showMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰.', 'error', 'gemini-result');
                return;
            }
            
            // âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: ÙƒÙˆØ¯ Ø§Ù„Ù€ API Ø§Ù„Ø°ÙŠ Ù‚Ø¯Ù…ØªÙŠÙ‡ (api/gemini) ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø­ÙØ¸ ÙÙŠ Supabase!
            // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© Ù‡Ù†Ø§ Ù„ØªØªÙˆÙ‚Ø¹ Ø£Ù† API Gemini Ø³ÙŠØ¹ÙŠØ¯ Ø§Ù„Ù†Øµ ÙÙ‚Ø·
            // Ø«Ù… ÙŠÙ…ÙƒÙ†ÙƒÙ Ø­ÙØ¸Ù‡ ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙÙŠ Neon Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠØ¯ÙˆÙŠ.
            
            try {
                showMessage(`Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...`, 'info', 'gemini-result');

                const response = await fetch(API_GEMINI_GENERATE, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    // ÙŠØ¬Ø¨ ØªÙ…Ø±ÙŠØ± user_id Ø­ØªÙ‰ ÙŠØ¹Ù…Ù„ ÙƒÙˆØ¯ Gemini API Ø§Ù„Ø°ÙŠ Ù‚Ø¯Ù…ØªÙŠÙ‡ (Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ 123)
                    body: JSON.stringify({ prompt: prompt, user_id: '123' }) 
                });

                const result = await response.json();

                if (response.ok && result.post && result.post.content) {
                    // ÙÙŠ Ø­Ø§Ù„ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©ØŒ Ù†Ù†Ù‚Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ø®Ø§Ù†Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ
                    contentTextarea.value = result.post.content; 
                    showMessage(`âœ… ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… ÙˆØ¶Ø¹Ù‡ ÙÙŠ Ø®Ø§Ù†Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©. (Post ID: ${result.post.id || 'N/A'})`, 'success', 'gemini-result');
                    document.getElementById('gemini-prompt').value = ''; 
                    // ØªÙ†Ø¨ÙŠÙ‡: Ù†ØªÙŠØ¬Ø© Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Supabase. ÙŠØ¬Ø¨ Ø§Ù„Ø¢Ù† Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Neon ÙŠØ¯ÙˆÙŠØ§Ù‹.
                } else {
                    showMessage(`âŒ ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰. Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ Ø£Ù† API Gemini Ø§Ù„Ø°ÙŠ Ø²ÙˆØ¯ØªÙŠÙ†Ø§ Ø¨Ù‡ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Supabase: ${result.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ.'}`, 'error', 'gemini-result');
                }

            } catch (error) {
                console.error('Gemini Fetch Error:', error);
                showMessage('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (ØªØ£ÙƒØ¯ÙŠ Ù…Ù† API Key Ùˆ Supabase/Neon).', 'error', 'gemini-result');
            }
        }


        // ==========================================================
        // ÙˆØ¸ÙŠÙØ© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² (Ù…Ø­Ø§ÙƒØ§Ø©)
        // ==========================================================
        
        function handleFileUpload(fileType) {
            let fileInput;
            let fileDescription;

            if (fileType === 'media') {
                fileInput = document.getElementById('media-file');
                fileDescription = 'Ù…Ù„Ù Ø§Ù„ÙˆØ³Ø§Ø¦Ø· (ÙÙŠØ¯ÙŠÙˆ/ØµÙˆØ±Ø©)';
            } else if (fileType === 'document') {
                fileInput = document.getElementById('doc-file');
                fileDescription = 'Ù…Ù„Ù Ø§Ù„Ù…Ù‚Ø§Ù„Ø©/Ø§Ù„Ø¨Ø­Ø«';
            }

            if (!fileInput || fileInput.files.length === 0) {
                showMessage(`Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ${fileDescription} Ø£ÙˆÙ„Ø§Ù‹.`, 'error', 'upload-message');
                return;
            }

            const file = fileInput.files[0];
            showMessage(`Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ ${fileDescription}: ${file.name} Ø¨Ø­Ø¬Ù… ${Math.round(file.size / 1024)} KB...`, 'info', 'upload-message');

            // âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ù‡Ù†Ø§ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙƒÙ Ø¯Ø§Ù„Ø© Ø®Ø§Ø¯Ù… (Upload API)
            // ØªØ³ØªÙ‚Ø¨Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙˆØªØ±ÙØ¹Ù‡ Ø¥Ù„Ù‰ Ø®Ø¯Ù…Ø© ØªØ®Ø²ÙŠÙ† Ø³Ø­Ø§Ø¨ÙŠ.
            // Ù„Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ÙƒÙˆØ¯ Ø§Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø±ÙØ¹ØŒ ÙŠØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù†Ø¬Ø§Ø­.

            setTimeout(() => {
                showMessage(`âœ… ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø±ÙØ¹ ${fileDescription} Ø¨Ù†Ø¬Ø§Ø­! (ÙŠØ¬Ø¨ Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ø§Ù„Ø© Ø®Ø§Ø¯Ù… Ù„Ù„Ø±ÙØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ)`, 'success', 'upload-message');
                fileInput.value = ''; 
            }, 2000);
        }

        // ==========================================================
        // ÙˆØ¸ÙŠÙØ© Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø´ÙˆØ± (POST) - ØªØ±Ø³Ù„ Ù„Ù€ /api/save-post (Neon)
        // ==========================================================

        async function savePost(event) {
            event.preventDefault();
            
            const postData = {
                content: document.getElementById('content').value.trim(),
                section: document.getElementById('section').value.trim(),
                type: document.getElementById('type').value,
                created_at: new Date().toISOString(),
            };

            if (!postData.content || !postData.section || !postData.type) {
                showMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.', 'error', 'message');
                return;
            }

            try {
                showMessage('Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø´ÙˆØ± ÙÙŠ Neon...', 'info', 'message');
                
                const response = await fetch(API_SAVE_POST, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(postData)
                });

                const result = await response.json();

                if (response.ok) {
                    showMessage('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Neon DB!', 'success', 'message');
                    document.getElementById('postForm').reset(); 
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø­ÙØ¸ (Ø§ÙØªØ±Ø§Ø¶Ø§Ù‹ Ù„Ø¯ÙŠÙƒÙ Ø¯Ø§Ù„Ø© Ù„Ø°Ù„Ùƒ)
                    if (window.parent && window.parent.refreshContent) {
                        window.parent.refreshContent();
                    }
                } else {
                    showMessage(`âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ${result.error || result.message}`, 'error', 'message');
                }

            } catch (error) {
                console.error('Fetch Error:', error);
                showMessage('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… Vercel Ù„Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.', 'error', 'message');
            }
        }

        // ==========================================================
        // ÙˆØ¸ÙŠÙØ© Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ± (DELETE) - ØªØ±Ø³Ù„ Ù„Ù€ /api/delete-post (Neon)
        // ==========================================================

        async function deletePost(event) {
            event.preventDefault();
            const deleteId = document.getElementById('deleteId').value.trim();
            
            if (!deleteId) {
                showMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØ¹Ø±Ù‘Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ± (ID).', 'error', 'delete-message');
                return;
            }

            if (!confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø±Ù‚Ù… ${deleteId}ØŸ`)) {
                return;
            }

            try {
                showMessage('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...', 'info', 'delete-message');
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Query Parameter ÙƒÙ…Ø§ ÙÙŠ ÙƒÙˆØ¯ API Ø§Ù„Ø°ÙŠ Ø²ÙˆØ¯ØªÙŠÙ‡
                const response = await fetch(`${API_DELETE_POST}?id=${deleteId}`, {
                    method: 'DELETE'
                });

                const result = await response.json();

                if (response.ok) {
                    showMessage(`ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø±Ù‚Ù… ${deleteId} Ø¨Ù†Ø¬Ø§Ø­!`, 'success', 'delete-message');
                    document.getElementById('deleteForm').reset(); 
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
                    if (window.parent && window.parent.refreshContent) {
                        window.parent.refreshContent();
                    }
                } else {
                    showMessage(`âŒ ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: ${result.message || result.error}`, 'error', 'delete-message');
                }

            } catch (error) {
                console.error('Delete Fetch Error:', error);
                showMessage('âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… Vercel Ù„Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.', 'error', 'delete-message');
            }
        }


        function showMessage(text, type, elementId) {
            const messageDiv = document.getElementById(elementId);
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`; 
            messageDiv.style.display = 'block';
        }
    </script>
</body>
</html>

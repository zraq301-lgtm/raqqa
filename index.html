<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ù‚Ø© | Ø¹Ø§Ù„Ù…ÙƒÙ Ø§Ù„Ø®Ø§Øµ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { --soft-pink: #fce4ec; --deep-pink: #e91e63; --feminine-purple: #9c27b0; --bg: #fffafa; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; direction: rtl; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .top-header { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .facebook-icon { color: #1877f2; font-size: 28px; text-decoration: none; transition: 0.3s; }
        .facebook-icon:hover { transform: scale(1.1); }
        
        /* Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© */
        .welcome-section { text-align: center; padding: 40px 20px; background: linear-gradient(135deg, var(--soft-pink), #ffffff); border-radius: 0 0 50px 50px; }
        .welcome-section h1 { color: var(--deep-pink); font-size: 28px; margin: 0; }
        .welcome-section p { color: #777; font-style: italic; margin-top: 10px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #eee; z-index: 1000; box-shadow: 0 -2px 15px rgba(0,0,0,0.05); }
        .nav-item { border: none; background: none; color: #888; display: flex; flex-direction: column; align-items: center; font-family: 'Tajawal'; font-size: 11px; cursor: pointer; transition: 0.3s; }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }
        .nav-item.active { color: var(--deep-pink); font-weight: bold; }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .page { display: none; padding: 20px; animation: fadeIn 0.5s; }
        .page.active { display: block; }
        .post-card { background: white; border-radius: 20px; padding: 15px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid #fff0f3; }
        .post-card img, .post-card video { width: 100%; border-radius: 15px; margin: 10px 0; }
        .post-actions { display: flex; gap: 15px; border-top: 1px solid #f9f9f9; padding-top: 10px; margin-top: 10px; }
        .action-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 13px; display: flex; align-items: center; gap: 5px; }
        .action-btn:hover { color: var(--deep-pink); }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„ØµØ­Ø© */
        .health-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .health-box { background: white; padding: 20px; border-radius: 20px; text-align: center; border: 1px solid #fce4ec; cursor: pointer; transition: 0.3s; }
        .health-box:hover { background: var(--soft-pink); }
        .health-box i { font-size: 24px; color: var(--deep-pink); }

        /* Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø²Ø§Ø¬ */
        .mood-box { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 2px dashed var(--soft-pink); text-align: center; }
        .mood-emojis { display: flex; justify-content: space-around; font-size: 30px; margin-top: 15px; }
        .mood-emojis span { cursor: pointer; transition: 0.3s; }
        .mood-emojis span:hover { transform: scale(1.3); }

        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
    </style>
</head>
<body>

    <header class="top-header">
        <a href="https://facebook.com/yourpage" class="facebook-icon" target="_blank"><i class="fab fa-facebook"></i></a>
        <div style="color: var(--deep-pink); font-weight: bold; font-size: 20px;">Ø±Ù‚Ø©</div>
        <div style="width: 28px;"></div> </header>

    <section id="home-page" class="page active">
        <div class="welcome-section">
            <h1>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙÙŠ Ø¹Ø§Ù„Ù… Ø±Ù‚Ø©.. ğŸŒ¸</h1>
            <p>Ù…Ø³Ø§Ø­ØªÙƒÙ Ø§Ù„Ø¢Ù…Ù†Ø© Ù„Ù„Ø¹Ù†Ø§ÙŠØ©ØŒ Ø§Ù„ÙÙ‚Ù‡ØŒ ÙˆØ§Ù„Ø¨ÙˆØ­ Ø¨Ø¬Ù…Ø§Ù„.</p>
        </div>
        <div id="latest-updates" style="margin-top: 20px;">
            </div>
    </section>

    <div id="bouh-display-1" class="page">
        <div class="mood-box">
            <h3>Ù…Ø¤Ø´Ø± Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ğŸ’–</h3>
            <p>ÙƒÙŠÙ Ø­Ø§Ù„ Ù‚Ù„Ø¨ÙƒÙ Ø§Ù„Ø¬Ù…ÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ØŸ</p>
            <div class="mood-emojis">
                <span onclick="analyzeMood('Ù…ØªÙØ§Ø¦Ù„Ø©')">ğŸ˜‡</span>
                <span onclick="analyzeMood('Ø±Ø§Ø¶ÙŠØ©')">ğŸ˜Š</span>
                <span onclick="analyzeMood('Ù…Ø±Ù‡Ù‚Ø©')">ğŸ˜«</span>
                <span onclick="analyzeMood('Ø­Ø²ÙŠÙ†Ø©')">ğŸ˜”</span>
            </div>
        </div>
        <div id="posts-1"></div>
        <textarea id="chat-1" placeholder="Ø¨Ù…Ø§Ø°Ø§ ØªÙˆØ¯ÙŠÙ† Ø§Ù„Ø¨ÙˆØ­ Ù„Ø±Ù‚Ø©ØŸ" style="width:100%; border-radius:15px; border:1px solid #eee; padding:10px;"></textarea>
        <button class="action-btn" onclick="askRaqqaAI('Ù…Ø´Ø§Ø¹Ø±', 1)" style="background: var(--deep-pink); color: white; padding: 10px 20px; border-radius: 10px; width: 100%; margin-top: 10px;">Ø§Ø³ØªØ´Ø§Ø±Ø© Ø°ÙƒÙŠØ©</button>
    </div>

    <div id="bouh-display-4" class="page">
        <h3>Ù…Ø¬ØªÙ…Ø¹Ù†Ø§ ğŸŒ¸</h3>
        <div id="posts-4"></div>
        <textarea id="chat-4" placeholder="Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØ§Ù„Ø£Ø³Ø±Ø©..." style="width:100%; border-radius:15px; border:1px solid #eee; padding:10px;"></textarea>
        <button onclick="askRaqqaAI('Ø§Ù„Ù…Ø¬ØªÙ…Ø¹', 4)" style="background: var(--feminine-purple); color: white; padding: 10px 20px; border-radius: 10px; width: 100%; margin-top: 10px; border: none;">Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬ØªÙ…Ø¹ÙŠØ©</button>
    </div>

    <div id="bouh-display-2" class="page">
        <h3>Ø±ÙƒÙ† Ø§Ù„ØµØ­Ø© ÙˆØ§Ù„Ø¹Ù†Ø§ÙŠØ© ğŸ©º</h3>
        <div class="health-grid">
            <div class="health-box" onclick="openHealthForm('Ø­ÙŠØ¶')"><i class="fas fa-calendar-alt"></i><p>Ø§Ù„Ø­ÙŠØ¶ ÙˆØ§Ù„ØªØ¨ÙˆÙŠØ¶</p></div>
            <div class="health-box" onclick="openHealthForm('Ø­Ù…Ù„1')"><i class="fas fa-baby"></i><p>Ø£ÙˆÙ„ 40 ÙŠÙˆÙ… Ø­Ù…Ù„</p></div>
            <div class="health-box" onclick="openHealthForm('Ø­Ù…Ù„2')"><i class="fas fa-heart"></i><p>Ø«Ø§Ù†ÙŠ 40 ÙŠÙˆÙ…</p></div>
            <div class="health-box" onclick="openHealthForm('Ø­Ù…Ù„3')"><i class="fas fa-stethoscope"></i><p>Ø«Ø§Ù„Ø« 40 ÙŠÙˆÙ…</p></div>
            <div class="health-box" onclick="openHealthForm('Ø­Ù…Ù„_Ù…ØªÙ‚Ø¯Ù…')"><i class="fas fa-walking"></i><p>Ø¨Ø¹Ø¯ 4 Ø£Ø´Ù‡Ø±</p></div>
            <div class="health-box" onclick="openHealthForm('Ø±Ø¶Ø§Ø¹Ø©')"><i class="fas fa-hand-holding-heart"></i><p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø±Ø¶Ø§Ø¹Ø©</p></div>
            <div class="health-box" onclick="openHealthForm('Ø£Ù…ÙˆÙ…Ø©')"><i class="fas fa-users"></i><p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù…ÙˆÙ…Ø©</p></div>
            <div class="health-box" onclick="openHealthForm('ØªØ®Ø³ÙŠØ³')"><i class="fas fa-weight"></i><p>Ø§Ù„ØªØ®Ø³ÙŠØ³ ÙˆØ§Ù„ÙˆØ²Ù†</p></div>
            <div class="health-box" onclick="openHealthForm('Ø·Ø¨ÙŠØ¨')"><i class="fas fa-user-md"></i><p>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</p></div>
            <div class="health-box" onclick="openHealthForm('Ø³ÙƒØ±_Ø¶ØºØ·')"><i class="fas fa-tint"></i><p>Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø³ÙƒØ±ÙŠ</p></div>
            <div class="health-box" onclick="openHealthForm('Ø±ÙŠØ§Ø¶Ø©')"><i class="fas fa-running"></i><p>Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ÙˆØ§Ù„Ù…Ø¯Ø±Ø¨</p></div>
        </div>
        <div id="posts-2"></div>
    </div>

    <div id="bouh-display-3" class="page">
        <h3>Ø±ÙƒÙ† Ø§Ù„ÙÙ‚Ù‡ ğŸ“–</h3>
        <div id="posts-3"></div>
        <textarea id="chat-3" placeholder="Ø³Ø¤Ø§Ù„Ùƒ Ø§Ù„ÙÙ‚Ù‡ÙŠ Ù‡Ù†Ø§..." style="width:100%; border-radius:15px; border:1px solid #eee; padding:10px;"></textarea>
        <button onclick="askRaqqaAI('Ø§Ù„ÙÙ‚Ù‡', 3)" style="background: #555; color: white; padding: 10px 20px; border-radius: 10px; width: 100%; margin-top: 10px; border: none;">Ø§Ø³ØªØ´Ø§Ø±Ø© ÙÙ‚Ù‡ÙŠØ©</button>
    </div>

    <div id="bouh-display-5" class="page">
        <h3>Ø±ÙƒÙ† Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ© ğŸ¤</h3>
        <div id="posts-5"></div>
        <textarea id="chat-5" placeholder="Ø§Ø³ØªØ´Ø§Ø±Ø© Ø­Ù…ÙŠÙ…ÙŠØ© Ø®Ø§ØµØ©..." style="width:100%; border-radius:15px; border:1px solid #eee; padding:10px;"></textarea>
        <button onclick="askRaqqaAI('Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©', 5)" style="background: #333; color: white; padding: 10px 20px; border-radius: 10px; width: 100%; margin-top: 10px; border: none;">Ø§Ø³ØªØ´Ø§Ø±Ø© Ø®Ø§ØµØ©</button>
    </div>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="navigate('home-page', this)"><i class="fas fa-home"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="nav-item" onclick="navigate('bouh-display-1', this)"><i class="fas fa-heart"></i>Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</button>
        <button class="nav-item" onclick="navigate('bouh-display-4', this)"><i class="fas fa-users"></i>Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</button>
        <button class="nav-item" onclick="navigate('bouh-display-2', this)"><i class="fas fa-leaf"></i>Ø§Ù„ØµØ­Ø©</button>
        <button class="nav-item" onclick="navigate('bouh-display-3', this)"><i class="fas fa-book"></i>Ø§Ù„ÙÙ‚Ù‡</button>
        <button class="nav-item" onclick="navigate('bouh-display-5', this)"><i class="fas fa-lock"></i>Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</button>
    </nav>

    <script>
        // Ø§Ù„ØªÙ†Ù‚Ù„
        function navigate(pageId, element) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            element.classList.add('active');
            if(pageId.startsWith('bouh')) fetchPosts(pageId);
        }

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Neon
        async function fetchPosts(section) {
            const containerNum = section.split('-').pop();
            const container = document.getElementById(`posts-${containerNum}`);
            container.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...";
            
            const response = await fetch('/api/get-posts');
            const data = await response.json();
            const filtered = data.posts.filter(p => p.section === section);

            container.innerHTML = filtered.map(post => `
                <div class="post-card">
                    <p>${post.content}</p>
                    ${post.media_url ? `<img src="${post.media_url}">` : ''}
                    <div class="post-actions">
                        <button class="action-btn" onclick="likePost(${post.id})"><i class="fas fa-heart"></i> Ø¥Ø¹Ø¬Ø§Ø¨</button>
                        <button class="action-btn" onclick="commentPrompt(${post.id})"><i class="fas fa-comment"></i> ØªØ¹Ù„ÙŠÙ‚</button>
                        <button class="action-btn" onclick="shareContent('${post.content}')"><i class="fas fa-share"></i> Ù…Ø´Ø§Ø±ÙƒØ©</button>
                    </div>
                </div>
            `).join('');
        }

        // Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªØ®ØµØµ
        async function askRaqqaAI(specialty, id) {
            const prompt = document.getElementById(`chat-${id}`).value;
            if(!prompt) return;
            Swal.fire({ title: 'Ø±Ù‚Ø© ØªÙÙƒØ±...', didOpen: () => Swal.showLoading() });

            const res = await fetch('/api/raqqa-ai', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ prompt: `Ø£Ø¬ÙŠØ¨ÙŠÙ†ÙŠ ÙƒØ®Ø¨ÙŠØ±Ø© ÙÙŠ ${specialty}: ${prompt}` })
            });
            const data = await res.json();
            Swal.fire('Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©', data.reply, 'success');
        }

        // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø²Ø§Ø¬
        function analyzeMood(mood) {
            askRaqqaAI(`Ù…Ø²Ø§Ø¬ Ø§Ù„Ø­Ø§Ù„Ø© (${mood})`, 1);
        }

        // Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø§Øª Ø§Ù„Ù€ 11 (Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„)
        function openHealthForm(type) {
            let html = '';
            if(type === 'Ø­ÙŠØ¶') {
                html = `<input type="date" id="d1" class="swal2-input" placeholder="Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø©"><select id="d2" class="swal2-input"><option>Ù…Ù†ØªØ¸Ù…Ø©</option><option>ØºÙŠØ± Ù…Ù†ØªØ¸Ù…Ø©</option></select>`;
            } else if(type === 'Ø±Ø¶Ø§Ø¹Ø©') {
                html = `<input type="number" id="d1" class="swal2-input" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¶Ø¹Ø§Øª"><select id="d2" class="swal2-input"><option>ÙŠÙ…ÙŠÙ†</option><option>ÙŠØ³Ø§Ø±</option></select>`;
            } else if(type.startsWith('Ø­Ù…Ù„')) {
                html = `<input type="date" id="d1" class="swal2-input" placeholder="ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø¯ÙˆØ±Ø©/Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø­Ù…Ù„">`;
            } else {
                html = `<input type="text" id="d1" class="swal2-input" placeholder="Ø§Ù„ÙˆØ²Ù†/Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø­Ø§Ù„ÙŠ">`;
            }

            Swal.fire({
                title: 'Ø³Ø¬Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒÙ Ù„Ø±Ù‚Ø©',
                html: html,
                confirmButtonText: 'ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ',
                preConfirm: () => [document.getElementById('d1').value, document.getElementById('d2')?.value]
            }).then((res) => {
                if(res.isConfirmed) askRaqqaAI(`Ù…ØªØ§Ø¨Ø¹Ø© ØµØ­ÙŠØ© Ù†ÙˆØ¹ ${type} Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${res.value}`, 2);
            });
        }

        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
        function shareContent(text) {
            if (navigator.share) {
                navigator.share({ title: 'Ø±Ù‚Ø©', text: text, url: window.location.href });
            } else {
                Swal.fire('Ù…Ø´Ø§Ø±ÙƒØ©', 'ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØµØŒ ÙŠÙ…ÙƒÙ†ÙƒÙ Ù„ØµÙ‚Ù‡ ÙÙŠ Ø£ÙŠ Ù…Ù†ØµØ©.', 'info');
            }
        }
    </script>
</body>
</html>

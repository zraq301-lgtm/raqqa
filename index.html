<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ù‚Ø© - Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ù†ÙˆØ«Ø©</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-pink: #e91e63;
            --soft-pink: #fce4ec;
            --deep-pink: #ad1457;
            --glass: rgba(255, 255, 255, 0.9);
            --grad: linear-gradient(135deg, #fff5f7 0%, #fce4ec 100%);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--grad);
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ --- */
        #auth-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .auth-card {
            background: white;
            border-radius: 30px;
            padding: 40px;
            width: 85%;
            max-width: 400px;
            box-shadow: 0 15px 35px rgba(233, 30, 99, 0.1);
            text-align: center;
        }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        #app-interface {
            display: none;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .welcome-section {
            text-align: center;
            padding: 30px 10px;
        }

        .welcome-title {
            font-family: 'Aref Ruqaa', serif;
            color: var(--primary-pink);
            font-size: 2.2rem;
            margin-bottom: 5px;
        }

        /* Ø§Ù„ÙØ±Ø§Ø´Ø© Ø§Ù„Ù†Ø§Ø¨Ø¶Ø© */
        .butterfly-container {
            font-size: 60px;
            margin: 20px 0;
            display: inline-block;
            animation: butterfly-fly 3s ease-in-out infinite;
        }

        @keyframes butterfly-fly {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.8; }
            50% { transform: translateY(-15px) scale(1.1); opacity: 1; text-shadow: 0 0 20px #f48fb1; }
        }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© (ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§) */
        .side-nav {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
        }

        .nav-item {
            background: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            color: var(--primary-pink);
            text-decoration: none;
            transition: 0.3s;
        }

        .nav-item:hover { background: var(--primary-pink); color: white; }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø®Ù…Ø³Ø© */
        .sections-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .section-btn {
            background: white;
            border: 1px solid var(--soft-pink);
            padding: 15px 10px;
            border-radius: 20px;
            cursor: pointer;
            text-align: center;
            font-weight: bold;
            transition: 0.3s;
            color: var(--deep-pink);
        }

        .section-btn:active { background: var(--soft-pink); }

        /* Ø´Ø§Ø´Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .display-screen {
            background: var(--glass);
            border-radius: 25px;
            padding: 25px;
            min-height: 300px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            position: relative;
        }

        .whisper-tag {
            background: var(--soft-pink);
            color: var(--deep-pink);
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
            margin-bottom: 20px;
            display: inline-block;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ */
        .action-bar {
            display: flex;
            justify-content: space-around;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid #eee;
        }

        .action-btn {
            border: none;
            background: none;
            color: #777;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.2s;
        }

        .action-btn:hover { color: var(--primary-pink); }
        .action-btn i { margin-left: 5px; }

        /* Ù‚Ø³Ù… Ø§Ù„ØµØ­Ø© (11 Ù…ØªØ§Ø¨Ø¹Ø©) */
        .health-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .health-tool {
            background: #fff;
            padding: 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            border: 1px solid #f9f9f9;
        }
    </style>
</head>
<body>

    <div class="side-nav">
        <a href="https://www.facebook.com/profile.php?id=61571056531349" target="_blank" class="nav-item">
            <i class="fab fa-facebook-f"></i>
        </a>
        <button onclick="signOut()" class="nav-item" title="Ø®Ø±ÙˆØ¬"><i class="fas fa-sign-out-alt"></i></button>
    </div>

    <div id="auth-container">
        <div class="auth-card">
            <h1 style="font-family:'Aref Ruqaa'; color:var(--primary-pink); font-size:3rem;">Ø±Ù‚Ø©</h1>
            <p>Ø³Ø¬Ù„ÙŠ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØ¨Ø¯Ø£ÙŠ Ø±Ø­Ù„Ø© Ø§Ù„Ø¬Ù…Ø§Ù„</p>
            <button class="section-btn" style="width:100%; margin:10px 0; background:#fff;" onclick="signIn('google')">
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" width="20"> Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¬ÙˆØ¬Ù„
            </button>
            <button class="section-btn" style="width:100%; margin:10px 0; background:#1877F2; color:white; border:none;" onclick="signIn('facebook')">
                <i class="fab fa-facebook-f"></i> Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± ÙÙŠØ³Ø¨ÙˆÙƒ
            </button>
        </div>
    </div>

    <div id="app-interface">
        <div class="welcome-section">
            <div class="welcome-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ ÙŠØ§ Ø±Ù‚ÙŠÙ‚Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø±Ù‚Ø©</div>
            <div style="color:#888;">Ø£Ù†ØªÙ Ù…ØªÙ…ÙŠØ²Ø©ØŒ ÙƒÙˆÙ†ÙŠ Ø±Ù‚ÙŠÙ‚Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹</div>
            <div class="butterfly-container">ğŸ¦‹</div>
        </div>

        <div class="sections-menu">
            <div class="section-btn" onclick="fetchNeonData('emotions')">Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</div>
            <div class="section-btn" onclick="fetchNeonData('community')">Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</div>
            <div class="section-btn" onclick="fetchHealthData()">Ø§Ù„ØµØ­Ø©</div>
            <div class="section-btn" onclick="fetchNeonData('fiqh')">Ø§Ù„ÙÙ‚Ù‡</div>
            <div class="section-btn" onclick="fetchNeonData('intimacy')">Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</div>
        </div>

        <div class="display-screen">
            <div id="fixed-whisper" class="whisper-tag">Ø§Ù„Ù‡Ù…Ø³Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ©: "Ø¬Ù…Ø§Ù„ÙƒÙ ÙÙŠ Ø±Ù‚ØªÙƒÙ"</div>
            <div id="content-body" style="line-height:1.6; color:#444;">
                ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø³Ù… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø®ØµØµ Ù„ÙƒÙ...
            </div>

            <div class="action-bar">
                <button class="action-btn" onclick="handleLike()"><i class="fas fa-heart"></i> Ø¥Ø¹Ø¬Ø§Ø¨</button>
                <button class="action-btn" onclick="handleComment()"><i class="fas fa-comment"></i> ØªØ¹Ù„ÙŠÙ‚</button>
                <button class="action-btn" onclick="handleShare()"><i class="fas fa-share-alt"></i> Ù…Ø´Ø§Ø±ÙƒØ©</button>
            </div>
            
            <a href="#" id="library-link" style="display:block; margin-top:20px; text-align:center; color:var(--primary-pink); text-decoration:none; font-weight:bold;">ğŸ”— Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</a>
        </div>
    </div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Supabase ---
        const SUPABASE_URL = "https://mdqveuisghriztgofssm.supabase.co"; 
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."; // Ø¶Ø¹ Ù…ÙØªØ§Ø­Ùƒ Ù‡Ù†Ø§
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        supabaseClient.auth.onAuthStateChange((event, session) => {
            const authCard = document.getElementById('auth-container');
            const appInterface = document.getElementById('app-interface');
            if (session) {
                authCard.style.display = 'none';
                appInterface.style.display = 'block';
            } else {
                authCard.style.display = 'flex';
                appInterface.style.display = 'none';
            }
        });

        async function signIn(provider) {
            await supabaseClient.auth.signInWithOAuth({ provider: provider });
        }

        async function signOut() {
            await supabaseClient.auth.signOut();
        }

        // --- Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Neon DB ---
        async function fetchNeonData(section) {
            const contentBody = document.getElementById('content-body');
            contentBody.innerHTML = `<p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ ${section} Ù…Ù† Neon DB...</p>`;
            
            // Ù‡Ù†Ø§ ØªØ¶Ø¹ ÙƒÙˆØ¯ Ø§Ù„Ù€ fetch Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ Neon API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
            // Ù…Ø«Ø§Ù„: fetch(`https://your-neon-endpoint.com/api/${section}`)...
        }

        function fetchHealthData() {
            const contentBody = document.getElementById('content-body');
            contentBody.innerHTML = `
                <div class="health-grid">
                    ${Array.from({length: 11}, (_, i) => `<div class="health-tool">Ù…ØªØ§Ø¨Ø¹Ø© ${i+1}<br><small>ØªØ·Ø¨ÙŠÙ‚ Ù…ØªÙƒØ§Ù…Ù„</small></div>`).join('')}
                </div>
                <p style="margin-top:15px;">Ù‚Ø³Ù… Ø§Ù„ØµØ­Ø© Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† Ø¨ÙƒØ§ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©.</p>
            `;
        }

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„
        function handleLike() { alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¥Ø¹Ø¬Ø§Ø¨Ùƒ ÙŠØ§ Ø±Ù‚ÙŠÙ‚Ø©!"); }
        function handleShare() { alert("Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©..."); }
        function handleComment() { 
            const msg = prompt("Ø§ÙƒØªØ¨ÙŠ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§:");
            if(msg) alert("Ø´ÙƒØ±Ø§Ù‹ Ù„ØªØ¹Ù„ÙŠÙ‚Ùƒ!");
        }
    </script>
</body>
</html>

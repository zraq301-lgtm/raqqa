<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ù‚Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@700&family=Tajawal:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-pink: #e91e63;
            --soft-pink: #fce4ec;
            --gold: #d4af37;
            --accent-blue: #2196F3;
            --accent-green: #4CAF50;
            --accent-red: #c62828; /* Ù„ÙˆÙ† Ù‚Ø³Ù… Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ© */
            --nav-height: 70px;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: #fdfcfc; margin: 0; padding-bottom: 90px;
            color: #4a4a4a; overflow-x: hidden;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ÙØ±Ø§Ø´Ø© Ø§Ù„Ù†Ø§Ø¨Ø¶Ø© */
        header { background: #fff; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
        .butterfly-box { font-size: 2.5rem; color: #fff; animation: pulse 2s infinite; display: inline-block; margin-top: 10px; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.7; } }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .main-container { padding: 15px; }
        .section-view { display: none; animation: fadeIn 0.4s ease; }
        .card { background: white; border-radius: 25px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; border-right: 6px solid var(--primary-pink); position: relative; }
        .hamssa { background: #fff9fb; border: 1px dashed var(--primary-pink); padding: 12px; border-radius: 12px; margin-bottom: 15px; color: var(--primary-pink); font-size: 0.85rem; }
        .library-btn { display: inline-block; padding: 6px 15px; background: var(--soft-pink); color: var(--primary-pink); text-decoration: none; border-radius: 20px; font-size: 0.75rem; font-weight: bold; margin-bottom: 10px; }

        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ø£ÙŠÙ‚ÙˆÙ†Ø© ØµØºÙŠØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø³Ù…) */
        .ai-fab { position: absolute; top: 15px; left: 15px; width: 40px; height: 40px; background: var(--primary-pink); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 3px 10px rgba(0,0,0,0.1); z-index: 5; }
        .ai-chat-window { display: none; background: #fff5f8; border: 1px solid var(--soft-pink); border-radius: 15px; padding: 10px; margin-top: 10px; }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„ØµØ­Ø© (11 Ù…ØªØ§Ø¨Ø¹Ø©) */
        .health-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .tracker-item { background: #fcfaff; padding: 10px; border-radius: 15px; text-align: center; cursor: pointer; border: 1px solid #eee; }
        .tracker-item i { display: block; font-size: 1.3rem; color: var(--accent-blue); margin-bottom: 5px; }
        .tracker-item span { font-size: 0.65rem; font-weight: bold; color: #555; }
        .app-inner { display: none; background: #f0f7ff; border: 1px solid var(--accent-blue); border-radius: 20px; padding: 15px; margin-top: 15px; }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø± */
        .preview-zone { display: none; border: 2px solid #ddd; border-radius: 15px; overflow: hidden; margin-bottom: 10px; position: relative; }
        .preview-zone img, .preview-zone video { width: 100%; max-height: 200px; object-fit: cover; }

        /* Ø§Ù„ØªÙ†Ù‚Ù„ */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height); background: white; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #ccc; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .nav-item.active { color: var(--primary-pink); }

        .btn-post { background: var(--primary-pink); color: white; border: none; padding: 12px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 5px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <header>
        <div onclick="toggleSidebar()" style="cursor:pointer;"><i class="fas fa-bars"></i></div>
        <div style="font-family:'Aref Ruqaa'; font-size: 2rem; color: var(--primary-pink);">Ø±Ù‚Ø©</div>
        <div style="width:24px"></div>
    </header>

    <div class="main-container">
        
        <div id="view-home" class="section-view" style="display: block; text-align: center;">
            <div class="card" style="background: linear-gradient(135deg, #e91e63, #ff80ab); color: white; border: none;">
                <h2 style="font-family:'Aref Ruqaa'; margin:0;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙŠØ§ Ø±Ù‚ÙŠÙ‚Ø© âœ¨</h2>
                <div class="butterfly-box"><i class="fas fa-butterfly"></i></div>
                <p>Ù…Ø³Ø§Ø­ØªÙƒÙ Ø§Ù„Ø¢Ù…Ù†Ø© Ù„ÙƒÙ„ Ù…Ø§ ÙŠØ®Øµ Ø£Ù†ÙˆØ«ØªÙƒÙ</p>
            </div>
            <div id="neon-global-feed"></div>
        </div>

        <div id="view-feelings" class="section-view">
            <div class="card">
                <div class="ai-fab" onclick="toggleAI('chat-feelings')"><i class="fas fa-robot"></i></div>
                <h3>Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</h3>
                <div class="hamssa">Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©: Ù‚Ù„Ø¨ÙƒÙ ÙŠØ³ØªØ­Ù‚ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©ØŒ Ø¹Ø¨Ø±ÙŠ Ø¹Ù…Ø§ Ø¨Ø¯Ø§Ø®Ù„ÙƒÙ.</div>
                <a href="https://ar.wikipedia.org/wiki/Ù…Ø´Ø§Ø¹Ø±" target="_blank" class="library-btn">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ğŸ“š</a>
                
                <div id="chat-feelings" class="ai-chat-window">
                    <input type="text" id="ai-input-feel" placeholder="ÙƒÙŠÙ ØªØ´Ø¹Ø±ÙŠÙ†ØŸ Ø±Ù‚Ø© AI ØªØ³Ù…Ø¹ÙƒÙ...">
                    <button class="btn-post" onclick="askGemini('ai-input-feel')">Ø¥Ø±Ø³Ø§Ù„ Ù„Ù€ AI</button>
                </div>
                <div id="bouh-display-1"></div>
            </div>
        </div>

        <div id="view-fiqh" class="section-view">
            <div class="card" style="border-right-color: var(--accent-green);">
                <h3>ÙÙ‚Ù‡ Ø§Ù„Ù…Ø±Ø£Ø©</h3>
                <div class="hamssa" style="color:var(--accent-green); border-color:var(--accent-green)">Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©: Ø§Ù„Ø¹Ù„Ù… Ù†ÙˆØ± ÙŠØ¶ÙŠØ¡ Ù„ÙƒÙ Ø¯Ø±ÙˆØ¨ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø©.</div>
                <a href="https://www.islamweb.net/ar/fatwa/47172" target="_blank" class="library-btn" style="background:#e8f5e9; color:var(--accent-green)">Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙÙ‚Ù‡ ğŸ“š</a>
                <div id="bouh-display-2"></div>
            </div>
        </div>

        <div id="view-society" class="section-view">
            <div class="card" style="border-right-color: var(--gold);">
                <h3>Ù…Ø¬ØªÙ…Ø¹ Ø±Ù‚Ø©</h3>
                <div class="hamssa" style="color:var(--gold); border-color:var(--gold)">Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©: Ø´Ø§Ø±ÙƒÙŠÙ†Ø§ Ù‚ØµØªÙƒÙ Ù„ØªØ¹Ù… Ø§Ù„ÙØ§Ø¦Ø¯Ø©.</div>
                
                <textarea id="post-text" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù…Ù†Ø´ÙˆØ±ÙƒÙ Ù‡Ù†Ø§..."></textarea>
                
                <div id="preview-container" class="preview-zone">
                    <div id="preview-content"></div>
                    <button onclick="removePreview()" style="position:absolute; top:5px; left:5px; background:red; color:white; border:none; border-radius:50%; width:25px; height:25px; cursor:pointer;">Ã—</button>
                </div>

                <div style="display:flex; gap:10px;">
                    <label style="flex:1; background:#f0f0f0; padding:10px; border-radius:12px; text-align:center; cursor:pointer;">
                        <i class="fas fa-image"></i> ØµÙˆØ±Ø©/ÙÙŠØ¯ÙŠÙˆ <input type="file" id="media-input" hidden accept="image/*,video/*" onchange="previewMedia(event)">
                    </label>
                    <button class="btn-post" style="flex:1; background:var(--gold); margin:0;" onclick="publishPost()">Ù†Ø´Ø± ÙÙŠ Ù†ÙŠÙˆÙ†</button>
                </div>
                <div id="bouh-display-4" style="margin-top:20px;"></div>
            </div>
        </div>

        <div id="view-intimacy" class="section-view">
            <div class="card" style="border-right-color: var(--accent-red);">
                <h3>Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</h3>
                <div class="hamssa" style="color:var(--accent-red); border-color:var(--accent-red)">Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©: Ø§Ù„Ù…ÙˆØ¯Ø© ÙˆØ§Ù„Ø±Ø­Ù…Ø© Ù‡Ù…Ø§ Ø£Ø³Ø§Ø³ Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø²ÙˆØ¬ÙŠ.</div>
                <a href="https://www.islamweb.net/ar/fatawa/2218/%D8%A7%D9%84%D9%86%D9%83%D8%A7%D8%AD" target="_blank" class="library-btn" style="background:#ffebee; color:var(--accent-red)">Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ© ğŸ“š</a>
                <div id="bouh-display-3"></div> </div>
        </div>

        <div id="view-health" class="section-view">
            <div class="card" style="border-right-color: var(--accent-blue);">
                <div class="ai-fab" style="background:var(--accent-blue)" onclick="toggleAI('chat-health')"><i class="fas fa-robot"></i></div>
                <h3>ØªØ·Ø¨ÙŠÙ‚ Ø±Ù‚Ø© Ø§Ù„ØµØ­ÙŠ</h3>
                <div class="hamssa" style="color:var(--accent-blue); border-color:var(--accent-blue)">Ù‡Ù…Ø³Ø© Ø±Ù‚Ø©: ØµØ­ØªÙƒÙ Ù‡ÙŠ Ø£ØºÙ„Ù‰ Ù…Ø§ ØªÙ…Ù„ÙƒÙŠÙ†.</div>
                
                <div class="health-grid">
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø­ÙŠØ¶')"><i class="fas fa-droplet"></i><span>Ø§Ù„Ø­ÙŠØ¶</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø­Ù…Ù„')"><i class="fas fa-baby"></i><span>Ø§Ù„Ø­Ù…Ù„</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø±Ø¶Ø§Ø¹Ø©')"><i class="fas fa-vial"></i><span>Ø§Ù„Ø±Ø¶Ø§Ø¹Ø©</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø£Ù…ÙˆÙ…Ø©')"><i class="fas fa-child"></i><span>Ø§Ù„Ø£Ù…ÙˆÙ…Ø©</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„ØªØºØ°ÙŠØ©')"><i class="fas fa-apple-alt"></i><span>Ø§Ù„ØªØºØ°ÙŠØ©</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø·Ø¨ÙŠØ¨')"><i class="fas fa-user-md"></i><span>Ø§Ù„Ø·Ø¨ÙŠØ¨</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø±ÙŠØ§Ø¶Ø©')"><i class="fas fa-running"></i><span>Ø§Ù„Ø±ÙŠØ§Ø¶Ø©</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„ØªØ®Ø³ÙŠØ³')"><i class="fas fa-weight"></i><span>Ø§Ù„ØªØ®Ø³ÙŠØ³</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ø¹Ù†Ø§ÙŠØ©')"><i class="fas fa-sparkles"></i><span>Ø§Ù„Ø¹Ù†Ø§ÙŠØ©</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ù†ÙˆÙ…')"><i class="fas fa-moon"></i><span>Ø§Ù„Ù†ÙˆÙ…</span></div>
                    <div class="tracker-item" onclick="openApp('Ø§Ù„Ù…Ø§Ø¡')"><i class="fas fa-tint"></i><span>Ø§Ù„Ù…Ø§Ø¡</span></div>
                </div>

                <div id="health-app-view" class="app-inner">
                    <h4 id="app-title" style="color:var(--accent-blue)"></h4>
                    <div id="app-form"></div>
                    <button class="btn-post" style="background:var(--accent-blue)" onclick="saveHealth()">Ø­ÙØ¸ ÙÙŠ Ù†ÙŠÙˆÙ†</button>
                </div>

                <div id="chat-health" class="ai-chat-window" style="border-color:var(--accent-blue)">
                    <input type="text" id="ai-input-health" placeholder="Ø§Ø³Ø£Ù„ÙŠ Ø±Ù‚Ø© AI Ø¹Ù† ØµØ­ØªÙƒÙ...">
                    <button class="btn-post" style="background:var(--accent-blue)" onclick="askGemini('ai-input-health')">Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ©</button>
                </div>
            </div>
        </div>

    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="showTab('view-home', this)"><i class="fas fa-home"></i><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></div>
        <div class="nav-item" onclick="showTab('view-feelings', this)"><i class="fas fa-heart"></i><span>Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</span></div>
        <div class="nav-item" onclick="showTab('view-fiqh', this)"><i class="fas fa-book"></i><span>Ø§Ù„ÙÙ‚Ù‡</span></div>
        <div class="nav-item" onclick="showTab('view-society', this)"><i class="fas fa-users"></i><span>Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</span></div>
        <div class="nav-item" onclick="showTab('view-intimacy', this)"><i class="fas fa-venus"></i><span>Ø­Ù…ÙŠÙ…ÙŠØ©</span></div>
        <div class="nav-item" onclick="showTab('view-health', this)"><i class="fas fa-medkit"></i><span>Ø§Ù„ØµØ­Ø©</span></div>
    </nav>

    <script>
        // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Neon DB Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
        async function loadNeonData() {
            try {
                const response = await fetch('/api/get-posts.js');
                const data = await response.json();
                if (data.posts) {
                    data.posts.forEach(post => {
                        const container = document.getElementById(post.section);
                        if (container) {
                            container.innerHTML += `
                                <div class="card" style="border-right:none; border-bottom:1px solid #eee; border-radius:0; padding:15px 0;">
                                    <p style="font-size:0.9rem;">${post.content}</p>
                                    <div style="display:flex; gap:15px; color:#999; font-size:0.8rem;">
                                        <span onclick="toggleLike(this)"><i class="fas fa-heart"></i> Ø£Ø¹Ø¬Ø¨Ù†ÙŠ</span>
                                        <span onclick="alert('ÙØªØ­ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª')"><i class="fas fa-comment"></i> ØªØ¹Ù„ÙŠÙ‚</span>
                                        <span onclick="alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®')"><i class="fas fa-share"></i> Ù…Ø´Ø§Ø±ÙƒØ©</span>
                                    </div>
                                </div>`;
                        }
                    });
                }
            } catch (e) { console.log("Database Sync Ready..."); }
        }

        function toggleLike(el) { el.style.color = (el.style.color === 'red') ? '#999' : 'red'; }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±
        function previewMedia(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview-container').style.display = 'block';
                const previewContent = document.getElementById('preview-content');
                if (file.type.startsWith('image')) {
                    previewContent.innerHTML = `<img src="${e.target.result}">`;
                } else {
                    previewContent.innerHTML = `<video src="${e.target.result}" controls></video>`;
                }
            };
            reader.readAsDataURL(file);
        }
        function removePreview() { document.getElementById('preview-container').style.display = 'none'; }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØµØ­Ø©
        function openApp(name) {
            const view = document.getElementById('health-app-view');
            view.style.display = 'block';
            document.getElementById('app-title').innerText = "Ø³Ø¬Ù„ " + name;
            document.getElementById('app-form').innerHTML = `<input type="date" value="${new Date().toISOString().split('T')[0]}" style="width:100%; padding:10px; border-radius:8px; border:1px solid #ddd;">
            <input type="text" placeholder="Ø³Ø¬Ù„ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒÙ Ù‡Ù†Ø§..." style="width:100%; padding:10px; border-radius:8px; border:1px solid #ddd; margin-top:5px;">`;
            view.scrollIntoView({behavior: 'smooth'});
        }

        // Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ®ØµØµ)
        function toggleAI(id) {
            const el = document.getElementById(id);
            el.style.display = (el.style.display === 'block') ? 'none' : 'block';
        }

        async function askGemini(inputId) {
            const val = document.getElementById(inputId).value;
            const keywords = ['Ø­Ù…Ù„', 'Ø¯ÙˆØ±Ø©', 'ØªØ¹Ø¨', 'Ø­Ø²Ù†', 'Ø²ÙˆØ¬ÙŠ', 'Ù…Ø´Ø§Ø¹Ø±', 'Ø£Ù„Ù…', 'Ù†ÙˆÙ…', 'Ù…Ø§Ø¡'];
            if (!keywords.some(k => val.includes(k))) {
                alert("Ø±Ù‚Ø© AI: Ø§Ø¹ØªØ°Ø± ÙŠØ§ Ø±Ù‚ÙŠÙ‚Ø©ØŒ Ø£Ù†Ø§ Ù…ØªØ®ØµØµØ© ÙÙŠ Ø¯Ø¹Ù…ÙƒÙ ØµØ­ÙŠØ§Ù‹ ÙˆÙ†ÙØ³ÙŠØ§Ù‹ ÙÙ‚Ø· Ù„Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…ØªÙƒÙ.");
                return;
            }
            alert("Ø±Ù‚Ø© AI: Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ø³ØªØ´Ø§Ø±ØªÙƒÙ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù„Ù… ÙˆØ§Ù„Ø£Ù†ÙˆØ«Ø©...");
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
        function showTab(id, el) {
            document.querySelectorAll('.section-view').forEach(v => v.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(el) el.classList.add('active');
            window.scrollTo(0,0);
        }

        window.onload = loadNeonData;
    </script>
</body>
                    </html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø±Ù‚Ø© | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root { 
            --p1: #ff85c0; --p2: #eb2f96; --purp: #722ed1; 
            --bg: #fffcfd; --soft: #fff0f6; --gold: #faad14;
            --glass: rgba(255, 255, 255, 0.95);
        }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; color: #444; overflow-x: hidden; }
        
        /* Header */
        .top-nav { background: var(--glass); backdrop-filter: blur(10px); padding: 15px 20px; display: flex; justify-content: center; box-shadow: 0 2px 15px rgba(0,0,0,0.05); position: sticky; top:0; z-index:1001; }
        .logo-text { font-weight: 800; color: var(--p2); font-size: 26px; }

        .page { display: none; padding: 15px; animation: fadeIn 0.5s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }

        /* AI Buttons */
        .ai-header-btn { color: white; border: none; width: 100%; padding: 16px; border-radius: 18px; font-weight: bold; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px; font-family: 'Tajawal'; font-size: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: 0.3s; }
        .btn-health { background: linear-gradient(135deg, #eb2f96, #ff4d4f); }
        .btn-intimacy { background: linear-gradient(135deg, #800020, #faad14); }

        /* Inline Navigation (Moved from Bottom) */
        .inline-nav { display: flex; gap: 10px; margin-bottom: 20px; }
        .inline-nav-btn { flex: 1; padding: 12px; border-radius: 12px; border: 1.5px solid #eee; background: white; color: #bbb; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: bold; transition: 0.3s; }
        .inline-nav-btn.active { background: var(--soft); border-color: var(--p2); color: var(--p2); }

        /* Health & Intimacy Cards */
        .grid-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
        .card-item { background: #fff; padding: 20px 10px; border-radius: 22px; text-align: center; border: 1.5px solid var(--soft); box-shadow: 0 4px 12px rgba(0,0,0,0.03); transition: 0.3s; cursor: pointer; }
        .card-item:hover { transform: translateY(-5px); border-color: var(--p1); }
        .card-item i { font-size: 32px; margin-bottom: 10px; display: block; }
        .card-item span { font-size: 14px; font-weight: 700; color: #444; }

        /* Sub-menu Grid (for two columns) */
        .submenu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; text-align: right; }
        .submenu-btn { padding: 12px; border: 1px solid #eee; border-radius: 15px; background: white; font-family: 'Tajawal'; text-align: center; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 5px; font-size: 13px; font-weight: bold; color: #555; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }

        /* Form Styling */
        .swal-label { display: block; text-align: right; margin-top: 12px; font-weight: bold; color: var(--p2); font-size: 14px; }
        .swal-custom-input { width: 100%; padding: 12px; margin-top: 5px; border-radius: 12px; border: 1px solid #ddd; font-family: 'Tajawal'; box-sizing: border-box; }
        .swal-back-btn { background: #eee; color: #333; border: none; padding: 6px 15px; border-radius: 8px; cursor: pointer; font-family: 'Tajawal'; margin-bottom: 15px; display: flex; align-items: center; gap: 5px; font-size: 13px; }

        /* Chat UI */
        #chat-overlay { display: none; position: fixed; inset: 0; background: white; z-index: 2000; flex-direction: column; }
        .chat-header { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; align-items: center; justify-content: space-between; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; background: #fdfbfd; }
        .msg { padding: 14px 18px; border-radius: 20px; max-width: 80%; font-size: 14px; line-height: 1.6; }
        .msg-user { align-self: flex-start; background: #f0f0f0; }
        .msg-ai { align-self: flex-end; background: var(--p2); color: white; }
        .chat-footer { padding: 15px; display: flex; gap: 10px; background: white; border-top: 1px solid #eee; }
        .chat-input { flex: 1; padding: 12px 20px; border-radius: 30px; border: 1.5px solid #eee; outline: none; font-family: 'Tajawal'; }
    </style>
</head>
<body>

    <header class="top-nav"><div class="logo-text">Ø±Ù‚Ø©</div></header>

    <div id="page-health" class="page active">
        <button class="ai-header-btn btn-health" onclick="openAIChat('Ø·Ø¨ÙŠØ¨Ø© Ø±Ù‚Ø©')"><i class="fas fa-stethoscope"></i> ØªØ­Ù„ÙŠÙ„ ØµØ­ÙŠ Ø´Ø§Ù…Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
        
        <div class="inline-nav">
            <div class="inline-nav-btn active" onclick="nav('health')"><i class="fas fa-heartbeat"></i> Ø§Ù„ØµØ­Ø©</div>
            <div class="inline-nav-btn" onclick="nav('intimacy')"><i class="fas fa-venus-mars"></i> Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</div>
        </div>

        <div class="grid-container" id="health-grid"></div>
    </div>

    <div id="page-intimacy" class="page">
        <button class="ai-header-btn btn-intimacy" onclick="openAIChat('Ù…Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª')"><i class="fas fa-venus-mars"></i> Ù…Ø­Ù„Ù„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ø²ÙˆØ¬ÙŠØ© Ø§Ù„Ø°ÙƒÙŠ</button>
        
        <div class="inline-nav">
            <div class="inline-nav-btn" onclick="nav('health')"><i class="fas fa-heartbeat"></i> Ø§Ù„ØµØ­Ø©</div>
            <div class="inline-nav-btn active" onclick="nav('intimacy')"><i class="fas fa-venus-mars"></i> Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©</div>
        </div>

        <div class="grid-container" id="intimacy-grid"></div>
    </div>

    <div id="chat-overlay">
        <div class="chat-header">
            <i class="fas fa-times" onclick="closeChat()" style="font-size: 22px; color: #999; cursor: pointer;"></i>
            <span id="chat-title" style="font-weight:bold; color: var(--p2);">Ø·Ø¨ÙŠØ¨Ø© Ø±Ù‚Ø©</span>
            <i class="fas fa-robot" style="color: var(--p2);"></i>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-footer">
            <input type="text" id="chat-input" class="chat-input" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø³Ø¤Ø§Ù„ÙƒÙ Ù‡Ù†Ø§...">
            <button onclick="sendMessage()" style="background:var(--p2); color:white; border:none; width:48px; height:48px; border-radius:50%;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        const healthData = {
            menstruation: { title: 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­ÙŠØ¶', icon: 'fa-tint', color: '#ff4d4f', sub: {
                "Ø³Ø¬Ù„ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® ğŸ“…": ["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡", "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡", "Ù…Ø¯Ø© Ø§Ù„Ø¯ÙˆØ±Ø©", "ØºØ²Ø§Ø±Ø© Ø§Ù„ØªØ¯ÙÙ‚"],
                "Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø§Ù„Ø¬Ø³Ø¯ÙŠØ© ğŸ˜–": ["ØªØ´Ù†Ø¬Ø§Øª", "Ø§Ù†ØªÙØ§Ø®", "ØµØ¯Ø§Ø¹", "Ø£Ù„Ù… Ø¸Ù‡Ø±"],
                "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø²Ø§Ø¬ÙŠØ© ğŸ˜°": ["Ù‚Ù„Ù‚", "Ø¹ØµØ¨ÙŠØ©", "Ù‡Ø¯ÙˆØ¡", "Ø±ØºØ¨Ø© Ø¨Ø§Ù„Ø¨ÙƒØ§Ø¡"],
                "Ø§Ù„ØµØ­Ø© Ø§Ù„Ø²ÙˆØ¬ÙŠØ© ğŸ¥š": ["ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø®ØµÙˆØ¨Ø©", "ØªØ­Ø°ÙŠØ±Ø§Øª Ø·Ø¨ÙŠØ©", "Ø¬ÙØ§Ù Ù…Ù‡Ø¨Ù„ÙŠ"],
                "Ø§Ù„ØªØºØ°ÙŠØ© ğŸ’§": ["Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡", "Ù…ØºÙ†ÙŠØ³ÙŠÙˆÙ…", "ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒØ§ÙÙŠÙŠÙ†"],
                "Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø¯Ù†ÙŠ ğŸ§˜â€â™€ï¸": ["ÙŠÙˆØºØ§", "Ù…Ø´ÙŠ Ø®ÙÙŠÙ", "Ø¥Ø·Ø§Ù„Ø©"],
                "Ø§Ù„Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø´Ø®ØµÙŠØ© ğŸ§¼": ["Ø³Ø¬Ù„ Ø§Ù„ØªØºÙŠÙŠØ±", "Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ø¹Ø§ÙŠØ©"]
            }},
            pregnancy: { title: 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ù…Ù„', icon: 'fa-baby', color: '#eb2f96', sub: {
                "Ù†Ù…Ùˆ Ø§Ù„Ø¬Ù†ÙŠÙ† ğŸ‘£": ["Ø§Ù„ÙˆØ²Ù† âš–ï¸", "Ø§Ù„Ø·ÙˆÙ„ ğŸ“", "Ù†Ø¨Ø¶ Ø§Ù„Ù‚Ù„Ø¨ â¤ï¸", "Ø§Ù„Ø­Ø±ÙƒØ©", "Ø±Ø£Ø³ Ø§Ù„Ø¬Ù†ÙŠÙ†", "Ø§Ù„Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ù…ÙŠÙ†ÙˆØ³ÙŠ"],
                "ØµØ­Ø© Ø§Ù„Ø£Ù… ğŸ©º": ["Ø§Ù„Ø¶ØºØ·", "Ø§Ù„Ø³ÙƒØ±", "Ø§Ù„ØºØ«ÙŠØ§Ù†", "Ø§Ù„ÙˆØ²Ù†", "ØªÙˆØ±Ù… Ø§Ù„Ù‚Ø¯Ù…ÙŠÙ†"],
                "Ø§Ù„ÙØ­ÙˆØµØ§Øª ğŸ§ª": ["Ø§Ù„Ø³ÙˆÙ†Ø§Ø±", "ÙØ­Øµ Ø§Ù„Ø¯Ù…", "ÙØ­Øµ Ø§Ù„Ø¨ÙˆÙ„", "Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù…"],
                "Ø³Ø¬Ù„ Ø§Ù„Ù…ÙƒÙ…Ù„Ø§Øª ğŸ’Š": ["ÙÙˆÙ„ÙŠÙƒ Ø£Ø³ÙŠØ¯", "Ø­Ø¯ÙŠØ¯", "ÙƒØ§Ù„Ø³ÙŠÙˆÙ…", "Ø£ÙˆÙ…ÙŠØ¬Ø§ 3"],
                "Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„ÙˆÙ„Ø§Ø¯Ø© ğŸ‘œ": ["ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³", "Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰", "Ø®Ø·Ø© Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©"],
                "Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø¯Ù†ÙŠ ğŸŠâ€â™€ï¸": ["Ø³Ø¨Ø§Ø­Ø©", "Ù…Ø´ÙŠ", "ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø­ÙˆØ¶"],
                "Ø§Ù„ØªØºØ°ÙŠØ© ğŸ": ["Ø§Ù„Ø³Ø¹Ø±Ø§Øª", "Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†", "Ø§Ù„Ø£Ù„ÙŠØ§Ù"]
            }},
            lactation: { title: 'Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¶Ø§Ø¹Ø©', icon: 'fa-magic', color: '#722ed1', sub: {
                "Ø³Ø¬Ù„ Ø§Ù„Ø±Ø¶Ø§Ø¹Ø© ğŸ¤±": ["Ø§Ù„ÙˆÙ‚Øª", "Ø§Ù„Ø¬Ù‡Ø© ÙŠÙ…ÙŠÙ†/ÙŠØ³Ø§Ø±", "Ø§Ù„Ù…Ø¯Ø©"],
                "Ø§Ù„Ø±Ø¶Ø§Ø¹Ø© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© ğŸ¼": ["Ø§Ù„ÙƒÙ…ÙŠØ© Ù…Ù„", "Ù†ÙˆØ¹ Ø§Ù„Ø­Ù„ÙŠØ¨"],
                "ØµØ­Ø© Ø§Ù„Ø«Ø¯ÙŠ ğŸ§¼": ["ØªØ­Ø¬Ø±", "ØªØ´Ù‚Ù‚Ø§Øª", "ØªÙ†Ø¸ÙŠÙ"],
                "ØªØºØ°ÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ø¹ ğŸŒ¿": ["Ø³ÙˆØ§Ø¦Ù„", "Ù…Ø¯Ø±Ø§Øª Ø§Ù„Ø­Ù„ÙŠØ¨"],
                "Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ø¶ÙŠØ¹ ğŸ˜´": ["Ø¹Ø¯Ø¯ Ø§Ù„Ø­ÙØ§Ø¶Ø§Øª", "Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†ÙˆÙ…"],
                "Ø§Ù„Ø´ÙØ· íŒ": ["ÙƒÙ…ÙŠØ© Ø§Ù„Ø´ÙØ·", "ØªØ§Ø±ÙŠØ® Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"],
                "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© ğŸ«‚": ["Ø¯Ø¹Ù… Ø¹Ø§Ø·ÙÙŠ", "Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø±Ø§Ø­Ø©"]
            }},
            doctor: { title: 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨', icon: 'fa-user-md', color: '#2f54eb', sub: {
                "Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© ğŸ¥": ["Ø§Ù„ØªØ§Ø±ÙŠØ®", "Ø§Ø³Ù… Ø§Ù„Ø·Ø¨ÙŠØ¨", "Ø§Ù„ØªØ´Ø®ÙŠØµ", "Ø§Ù„Ø¯ÙˆØ§Ø¡", "Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù…", "Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª", "Ø§Ù„ØªØ®ØµØµ"]
            }},
            fitness: { title: 'Ø§Ù„Ø±Ø´Ø§Ù‚Ø© ÙˆØ§Ù„ÙˆØ²Ù†', icon: 'fa-weight', color: '#faad14', sub: {
                "Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¬Ø³Ù… ğŸ“": ["Ø§Ù„Ø®ØµØ±", "Ø§Ù„ÙˆØ±Ùƒ", "Ø§Ù„ØµØ¯Ø±", "Ø§Ù„ÙˆØ²Ù†"],
                "Ø§Ù„Ø³Ø¹Ø±Ø§Øª ğŸ”¥": ["Ø§Ù„Ù…ØªÙ†Ø§ÙˆÙ„Ø©", "Ø§Ù„Ù…Ø­Ø±ÙˆÙ‚Ø©"],
                "Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ğŸƒâ€â™€ï¸": ["Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡", "Ù†ÙˆØ¹ Ø§Ù„ØªÙ…Ø±ÙŠÙ†", "Ø§Ù„Ø®Ø·ÙˆØ§Øª"],
                "Ø§Ù„Ù†ÙˆÙ… ÙˆØ§Ù„ØµÙŠØ§Ù… ğŸ’¤": ["Ø¬ÙˆØ¯Ø© Ø§Ù„Ù†ÙˆÙ…", "Ø§Ù„ØµÙŠØ§Ù… Ø§Ù„Ù…ØªÙ‚Ø·Ø¹"]
            }},
            beauty: { title: 'Ø§Ù„Ø£Ù†Ø§Ù‚Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ù„', icon: 'fa-spa', color: '#13c2c2', sub: {
                "Ø§Ù„Ø±ÙˆØªÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ âœ¨": ["Ø¨Ø´Ø±Ø©", "Ø´Ø¹Ø±", "Ø£Ø¸Ø§ÙØ±"],
                "Ø¹Ù†Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© ğŸ§´": ["Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø´ÙŠØ®ÙˆØ®Ø©", "ØªØ±Ø·ÙŠØ¨ Ø§Ù„Ø¬Ø³Ù…", "ØªÙ‚Ø´ÙŠØ±"],
                "Ø³ØªØ§ÙŠÙ„ ğŸ‘—": ["ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³", "Ø§Ù„ØµØ­Ø© Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠØ©"]
            }}
        };

        const intimacyData = {
            emotional: { title: 'Ø§Ù„ÙˆØ¯ ÙˆØ§Ù„Ø§ØªØµØ§Ù„', icon: 'fa-heart', sub: {
                "Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø§Ù„Ø¹Ø§Ø·ÙÙŠ ğŸ—£ï¸": ["Ù„ØºØ© Ø§Ù„Ø­ÙˆØ§Ø±", "ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ù†Ø¸Ø±Ø§Øª", "ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙ‚Ø¯ÙŠØ±", "Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§", "Ø§Ù„Ø¯Ø¹Ù…", "Ø§Ù„Ø¶Ø­Ùƒ", "ÙˆÙ‚Øª Ø®Ø§Øµ", "Ø§Ù„Ù„Ù…Ø³ Ø§Ù„Ø¹ÙÙˆÙŠ", "Ø§Ù„Ø£Ù…Ø§Ù†", "Ø§Ù„ØªØ³Ø§Ù…Ø­"]
            }},
            sensuality: { title: 'Ù„ØºØ© Ø§Ù„Ø¬Ø³Ø¯', icon: 'fa-fire', sub: {
                "Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ ÙˆØ§Ù„Ù…Ù„Ø§Ø·ÙØ© ğŸ’‹": ["Ø§Ù„Ù‚Ø¨Ù„Ø§Øª", "Ø§Ù„Ø£Ø­Ø¶Ø§Ù†", "Ø§Ù„Ù…Ù„Ø§Ø·ÙØ©", "Ù„ØºØ© Ø§Ù„Ø¹ÙŠÙˆÙ†", "Ù‡Ù…Ø³", "ØªØ¯Ù„ÙŠÙƒ", "Ù†Ø¸Ø§ÙØ©", "ØªØ£Ù†Ù‚"]
            }},
            physical: { title: 'Ø§Ù„ØµØ­Ø© Ø§Ù„ØªØ¨Ø§Ø¯Ù„ÙŠØ©', icon: 'fa-venus-mars', sub: {
                "Ø§Ù„Ù„Ù‚Ø§Ø¡ Ø§Ù„Ø¬Ù†Ø³ÙŠ ğŸŒ¡ï¸": ["ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø±ØºØ¨Ø©", "Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø©", "Ø§Ø³ØªÙƒØ´Ø§Ù", "Ø§Ù„ØªÙØ§Ø¹Ù„", "Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø§Ø­ØªÙŠØ§Ø¬", "Ø¥Ø´Ø¨Ø§Ø¹", "Ø§Ù„Ù…Ø¯Ø©"]
            }},
            aftercare: { title: 'Ø§Ù„Ù†Ø´ÙˆØ© ÙˆÙ…Ø§ Ø¨Ø¹Ø¯Ù‡Ø§', icon: 'fa-stars', sub: {
                "Ø§Ù„Ø§Ø·Ù…Ø¦Ù†Ø§Ù† ğŸ’": ["Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø´ÙˆØ©", "Ø§Ù„ØªØ²Ø§Ù…Ù†", "Ø­Ø¶Ù† Ø¨Ø¹Ø¯ÙŠ", "ÙƒÙ„Ù…Ø§Øª Ø­Ø¨", "Ø¨Ù‚Ø§Ø¡ Ù…Ø¹Ø§", "Ø±Ø¶Ø§", "Ø¹Ù†Ø§ÙŠØ©"]
            }},
            creativity: { title: 'Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹', icon: 'fa-lightbulb', sub: {
                "ÙƒØ³Ø± Ø§Ù„Ø±ÙˆØªÙŠÙ† ğŸ”„": ["ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙƒØ§Ù†", "Ø£ÙˆØ¶Ø§Ø¹ Ø¬Ø¯ÙŠØ¯Ø©", "Ø±ÙˆØ§Ø¦Ø­", "Ù…ÙˆØ³ÙŠÙ‚Ù‰", "ØªÙØ§Ø¹Ù„ Ø³Ù…Ø¹ÙŠ", "Ù…ÙØ§Ø¬Ø¢Øª"]
            }},
            boundaries: { title: 'Ø§Ù„Ø¶ÙˆØ§Ø¨Ø· Ø§Ù„Ø´Ø±Ø¹ÙŠØ©', icon: 'fa-shield-halved', sub: {
                "Ø§Ù„Ø³ØªØ± ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ© ğŸ¤": ["ØªØ¬Ù†Ø¨ Ø§Ù„Ø­ÙŠØ¶", "ØªØ¬Ù†Ø¨ Ø§Ù„Ø¯Ø¨Ø±", "Ø¹Ø¯Ù… Ø¥ÙØ´Ø§Ø¡ Ø§Ù„Ø³Ø±", "ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥ÙƒØ±Ø§Ù‡", "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø³ØªØ±"]
            }},
            sexualhealth: { title: 'Ø§Ù„ØµØ­Ø© Ø§Ù„ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©', icon: 'fa-dna', sub: {
                "Ø§Ù„Ø¨Ø¯Ù† ÙˆØ§Ù„Ù‚Ø¯Ø±Ø© ğŸ’ª": ["Ù‚Ø¯Ø±Ø© Ø¨Ø¯Ù†ÙŠØ©", "ØºÙŠØ§Ø¨ Ø§Ù„Ø£Ù„Ù…", "Ù‡Ø±Ù…ÙˆÙ†Ø§Øª", "Ø±ÙŠØ§Ø¶Ø© Ù…Ù‚ÙˆÙŠØ©", "ØªØºØ°ÙŠØ©", "Ù†ÙˆÙ…"]
            }},
            barriers: { title: 'Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ÙˆØ§Ù„ØµØ¹ÙˆØ¨Ø§Øª', icon: 'fa-ban', sub: {
                "ØªØ­Ø¯ÙŠØ§Øª ÙŠÙˆÙ…ÙŠØ© ğŸŒªï¸": ["Ø¶ØºÙˆØ·", "Ø§Ù†Ø´ØºØ§Ù„ Ø¨Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡", "ØªØ¹Ø¨", "Ù…Ù„Ù„", "ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø³Ø¯"]
            }},
            education: { title: 'Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ§Ù„Ø«Ù‚Ø§ÙØ©', icon: 'fa-book-open', sub: {
                "Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø³ÙŠÙƒÙˆÙ„ÙˆØ¬ÙŠ ğŸ§ ": ["Ø³ÙŠÙƒÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ø±Ø¬Ù„", "Ø³ÙŠÙƒÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ù…Ø±Ø£Ø©", "ÙƒØªØ¨ ØªÙ†Ù…ÙŠØ©", "Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ØªØ¹Ø©"]
            }},
            spiritual: { title: 'Ø§Ù„Ø§Ø·Ù…Ø¦Ù†Ø§Ù† Ø§Ù„Ø±ÙˆØ­ÙŠ', icon: 'fa-mosque', sub: {
                "Ø§Ù„Ù†ÙŠØ© ÙˆØ§Ù„Ø¹Ø¨Ø§Ø¯Ø© ğŸ¤²": ["Ø¯Ø¹Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©", "ØºØ³Ù„ Ù…Ø´ØªØ±Ùƒ", "Ø´ÙƒØ± Ø§Ù„Ù†Ø¹Ù…Ø©", "Ù†ÙŠØ© Ø§Ù„Ø¥Ø¹ÙØ§Ù"]
            }}
        };

        function renderHealth() {
            const grid = document.getElementById('health-grid');
            grid.innerHTML = '';
            for (let key in healthData) {
                grid.innerHTML += `
                    <div class="card-item" onclick="openSubMenu('${key}', 'health')">
                        <i class="fas ${healthData[key].icon}" style="color:${healthData[key].color}"></i>
                        <span>${healthData[key].title}</span>
                    </div>`;
            }
        }

        function renderIntimacy() {
            const grid = document.getElementById('intimacy-grid');
            grid.innerHTML = '';
            for (let key in intimacyData) {
                grid.innerHTML += `
                    <div class="card-item" onclick="openSubMenu('${key}', 'intimacy')">
                        <i class="fas ${intimacyData[key].icon}" style="color:#800020"></i>
                        <span>${intimacyData[key].title}</span>
                    </div>`;
            }
        }

        function openSubMenu(mainKey, type) {
            const data = type === 'health' ? healthData[mainKey] : intimacyData[mainKey];
            let html = `<div class="submenu-grid">`;
            for (let subKey in data.sub) {
                html += `
                    <div class="submenu-btn" onclick="openForm('${mainKey}', '${subKey}', '${type}')">
                        <i class="fas fa-list-ul" style="color:var(--p2); font-size:16px;"></i>
                        <span>${subKey}</span>
                    </div>`;
            }
            html += `</div>`;

            Swal.fire({ title: data.title, html: html, showConfirmButton: false, showCloseButton: true });
        }

        function openForm(mainKey, subKey, type) {
            const data = type === 'health' ? healthData[mainKey] : intimacyData[mainKey];
            const fields = data.sub[subKey];
            let formHtml = `
                <button class="swal-back-btn" onclick="openSubMenu('${mainKey}', '${type}')"><i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹</button>
                <div style="max-height:350px; overflow-y:auto; padding:5px;">`;
            
            fields.forEach((f, i) => {
                formHtml += `<label class="swal-label">${f}:</label><input id="v${i}" class="swal-custom-input" placeholder="Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...">`;
            });
            formHtml += `</div>`;

            Swal.fire({
                title: subKey,
                html: formHtml,
                confirmButtonText: 'Ø­ÙØ¸ ÙˆØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ âœ¨',
                confirmButtonColor: type === 'health' ? '#eb2f96' : '#800020',
                preConfirm: () => {
                    let results = [];
                    fields.forEach((f, i) => {
                        results.push(f + ": " + document.getElementById('v' + i).value);
                    });
                    return { category: subKey, note: results.join(' | ') };
                }
            }).then(async (result) => {
                if (result.isConfirmed) {
                    saveAndAnalyze(result.value, type);
                }
            });
        }

        async function saveAndAnalyze(payload, type) {
            Swal.fire({ title: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„...', didOpen: () => Swal.showLoading() });
            try {
                const response = await fetch('/api/save-health', { 
                    method: 'POST', 
                    headers: { 'Content-Type': 'application/json' }, 
                    body: JSON.stringify({ category: payload.category, note: payload.note, user_id: 1 }) 
                });
                const data = await response.json();
                openAIChat(type === 'health' ? 'Ø·Ø¨ÙŠØ¨Ø© Ø±Ù‚Ø©' : 'Ù…Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©');
                const container = document.getElementById('chat-messages');
                container.innerHTML += `<div class="msg msg-user">ØªÙ… ØªØ³Ø¬ÙŠÙ„: ${payload.note}</div>`;
                container.innerHTML += `<div class="msg msg-ai">${data.advice || "ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒÙ Ø¨Ù†Ø¬Ø§Ø­."}</div>`;
                container.scrollTop = container.scrollHeight;
                Swal.fire('ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ¨', 'ÙŠÙ…ÙƒÙ†ÙƒÙ Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙÙŠ Ø§Ù„Ø´Ø§Øª', 'success');
            } catch (e) {
                Swal.fire('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­', 'info');
            }
        }

        function nav(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø·Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©
            document.querySelectorAll('.inline-nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText.includes(id === 'health' ? 'Ø§Ù„ØµØ­Ø©' : 'Ø§Ù„Ø­Ù…ÙŠÙ…ÙŠØ©')) {
                    btn.classList.add('active');
                }
            });
        }

        function openAIChat(title) {
            document.getElementById('chat-title').innerText = title;
            document.getElementById('chat-overlay').style.display = 'flex';
        }

        function closeChat() { document.getElementById('chat-overlay').style.display = 'none'; }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const text = input.value;
            if(!text) return;
            const container = document.getElementById('chat-messages');
            container.innerHTML += `<div class="msg msg-user">${text}</div>`;
            input.value = '';
            
            try {
                const res = await fetch('/api/raqqa-ai', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({ prompt: text }) });
                const data = await res.json();
                container.innerHTML += `<div class="msg msg-ai">${data.reply || "Ø£Ù†Ø§ Ù…Ø¹ÙƒÙ.. Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ."}</div>`;
            } catch(e) {
                container.innerHTML += `<div class="msg msg-ai">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø£Ø­ØªØ§Ø¬ Ù„Ø«ÙˆØ§Ù†Ù Ù„Ù„ØªØ­Ù„ÙŠÙ„.. Ù‡Ù„ Ù…Ù† Ø³Ø¤Ø§Ù„ Ø¢Ø®Ø±ØŸ</div>`;
            }
            container.scrollTop = container.scrollHeight;
        }

        window.onload = () => {
            renderHealth();
            renderIntimacy();
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <title>رقة VR - التجربة الغامرة</title>
    <style>
        body { background-color: #000; }
        /* واجهة تحميل رقيقة */
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #fce4ec; z-index: 100; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            font-family: sans-serif; color: #ad1457; transition: opacity 1s;
        }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <h2>جاري تحضير عالمكِ الخاص... ✨</h2>
        <p>يرجى تحريك الهاتف عند البدء</p>
    </div>

    <a-scene file-loader>
        <a-assets>
            <img id="lobby-img" src="lobby.jpg">
            <img id="emotions-img" src="emotions.jpg">
            <img id="health-img" src="health.jpg">
            <img id="intimacy-img" src="intimacy.jpg">
            
            <audio id="relax-music" src="https://www.soundjay.com/nature/ocean-wave-1.mp3" preload="auto"></audio>
            <audio id="soft-piano" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" preload="auto"></audio>
        </a-assets>

        <a-entity camera look-controls="magicWindowTrackingEnabled: true; touchEnabled: true" position="0 1.6 0">
            <a-cursor id="main-cursor"
                animation__fusing="property: geometry.radiusOuter; from: 0.03; to: 0.01; dur: 1500; startEvents: fusing"
                animation__reset="property: geometry.radiusOuter; to: 0.03; startEvents: mouseleave"
                raycaster="objects: .clickable"
                material="color: #ff80ab; shader: flat"
                geometry="primitive: ring; radiusOuter: 0.03; radiusInner: 0.02">
            </a-cursor>
        </a-entity>

        <a-entity id="room-lobby">
            <a-sky src="#lobby-img" rotation="0 -90 0"></a-sky>
            
            <a-entity position="0 3 -5">
                <a-text value="عالم رقة" align="center" color="#fff" width="10"></a-text>
                <a-text value="اختاري وجهتكِ اليوم" align="center" position="0 -0.5 0" color="#fce4ec" width="4"></a-text>
            </a-entity>

            <a-entity class="clickable" id="go-emotions" position="-2.5 1.5 -4">
                <a-torus color="#9575CD" radius="0.5" radius-tubular="0.01" animation="property: rotation; to: 0 360 0; loop: true; dur: 3000"></a-torus>
                <a-text value="ملاذ السكينة" align="center" position="0 -0.8 0" width="3"></a-text>
            </a-entity>

            <a-entity class="clickable" id="go-health" position="0 1.5 -4">
                <a-torus color="#81C784" radius="0.5" radius-tubular="0.01" animation="property: scale; to: 1.1 1.1 1.1; dir: alternate; loop: true; dur: 2000"></a-torus>
                <a-text value="واحة العافية" align="center" position="0 -0.8 0" width="3"></a-text>
            </a-entity>

            <a-entity class="clickable" id="go-intimacy" position="2.5 1.5 -4">
                <a-torus color="#F06292" radius="0.5" radius-tubular="0.01" animation="property: rotation; to: 360 360 0; loop: true; dur: 5000"></a-torus>
                <a-text value="همسات القلوب" align="center" position="0 -0.8 0" width="3"></a-text>
            </a-entity>
        </a-entity>

        <a-entity id="room-emotions" visible="false">
            <a-sky src="#emotions-img"></a-sky>
            <a-entity position="0 2 -3">
                <a-plane width="2" height="0.5" material="color: #000; opacity: 0.3"></a-plane>
                <a-text value="دقيقة تنفس واحدة تقلل التوتر بنسبة 40%" align="center" width="3"></a-text>
            </a-entity>
            <a-circle class="clickable" id="back-to-1" position="0 0.5 -2" radius="0.15" color="#fff" opacity="0.5"><a-text value="رجوع" align="center" color="#000" width="2"></a-text></a-circle>
        </a-entity>

        <a-entity id="room-health" visible="false">
            <a-sky src="#health-img"></a-sky>
            <a-text value="اشربي 8 أكواب ماء لجمال بشرتكِ" position="0 2.2 -3" align="center" width="4"></a-text>
            <a-circle class="clickable" id="back-to-2" position="0 0.5 -2" radius="0.15" color="#fff" opacity="0.5"><a-text value="رجوع" align="center" color="#000" width="2"></a-text></a-circle>
        </a-entity>

        <a-entity id="room-intimacy" visible="false">
            <a-sky src="#intimacy-img"></a-sky>
            <a-text value="الحوار الهادئ هو مفتاح القلوب" position="0 2.2 -3" align="center" width="4"></a-text>
            <a-circle class="clickable" id="back-to-3" position="0 0.5 -2" radius="0.15" color="#fff" opacity="0.5"><a-text value="رجوع" align="center" color="#000" width="2"></a-text></a-circle>
        </a-entity>

    </a-scene>

    <script>
        const overlay = document.getElementById('loading-overlay');
        const rooms = {
            lobby: document.getElementById('room-lobby'),
            emotions: document.getElementById('room-emotions'),
            health: document.getElementById('room-health'),
            intimacy: document.getElementById('room-intimacy')
        };
        const music = document.getElementById('relax-music');

        // إخفاء شاشة التحميل
        window.onload = () => { setTimeout(() => { overlay.style.opacity = '0'; setTimeout(()=> overlay.remove(), 1000); }, 2000); };

        function changeRoom(target) {
            // تأثير Fade Out
            document.querySelector('a-scene').setAttribute('animation', 'property: opacity; from: 1; to: 0; dur: 500');
            
            setTimeout(() => {
                Object.values(rooms).forEach(r => r.setAttribute('visible', 'false'));
                rooms[target].setAttribute('visible', 'true');
                if(target !== 'lobby') music.play(); else music.pause();
                
                // تأثير Fade In
                document.querySelector('a-scene').setAttribute('animation', 'property: opacity; from: 0; to: 1; dur: 500');
            }, 500);
        }

        document.getElementById('go-emotions').addEventListener('click', () => changeRoom('emotions'));
        document.getElementById('go-health').addEventListener('click', () => changeRoom('health'));
        document.getElementById('go-intimacy').addEventListener('click', () => changeRoom('intimacy'));
        
        document.querySelectorAll('[id^="back-to"]').forEach(btn => {
            btn.addEventListener('click', () => changeRoom('lobby'));
        });
    </script>
</body>
                    </html>
